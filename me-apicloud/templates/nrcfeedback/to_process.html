<!--Add MR-->
<div class="navbar navbar-app navbar-absolute-top">
    <div class="navbar-brand navbar-brand-center">
        TO 反馈
    </div>
    <div class="btn-group btn-group-left">
        <!--<div class="btn" ng-click="go('back','slideRight')">-->
        <div class="btn" ng-click="gobackToRoot()">
            <i class="icon-maoc icon-back"></i>
        </div>
    </div>
</div>
<div class="scrollable-content fault p-newFault">
    <form name="myForm" novalidate>
        <div class="damage-draft-detail" style="margin-bottom: 5px">
            <div class="section-1">
                <div class="header" style="color: #000">基础信息
                    <span  style="margin-left: 20px" ng-bind="mrInfo.acReg">132</span>
                    <span style="margin-left: 20px"  ng-bind="mrInfo.flightNo">456</span>
                    <span style="margin-left: 20px"  ng-bind="mrInfo.station">789</span>
                    <span style="margin-left: 20px"  ng-bind="mrInfo.type">999</span></div>
            </div>
        </div>
        <div class="damage-draft-detail" style="margin-bottom: 5px">
            <div class="section-1">
                <div class="header" style="color: #000">航班日期：
                    <span  style="margin-left: 20px" >{{mrInfo.flightDate | date:'yyyy-MM-dd'}}</span>
                </div>
            </div>
        </div>
        <div class="damage-draft-detail" style="margin-bottom: 5px">
            <div class="section-1">
                <div class="header" style="color: #000">任务文件号：
                    <span  style="margin-left: 20px" ng-bind="mrInfo.cardNumber">132</span>
                </div>
            </div>
        </div>
        <div class="damage-draft-detail" style="margin-bottom: 5px">
            <div class="section-1">
                <div class="header" style="color: #000">任务描述：
                    <span  style="margin-left: 20px" ng-bind="mrInfo.subject">132</span>
                </div>
            </div>
        </div>
        <div class="damage-draft-detail" style="margin-bottom: 5px"
             ng-if="toType=='toProdprep'&&producePrepareOrders.length>0">
            <div class="section-1">
                <div class="header" style="color: #000">生产准备单：</div>
            </div>
            <div class="approver-content-wrap" ng-repeat="(k, v) in producePrepareOrders">
                <div style="color: #000;width: 100%;border-color:#fff">准备单编号
                    <span  style="margin-left: 20px" ng-bind="v.no">28-11-10-B757-11</span>
                </div>
                <div style="color: #000;width: 100%;border-color:#fff">工作内容
                    <span  style="margin-left: 20px" ng-bind="v.content">更换燃油封圈</span>
                </div>
                <div style="color: #000;width: 100%;border-color:#fff">计划工时
                    <span  style="margin-left: 20px" ng-bind="v.expectStaff">1</span>人*
                    <span  ng-bind="v.expectHour">2</span>小时
                </div>
                <div style="color: #000;width: 100%;border-color:#fff">实际工时<span class="red">*</span>
                    <span  style="margin-left: 20px">
                        <input type="number" class=""
                               style="width:20%;display:inline-block;border: 1px solid #ddd;"
                               ng-model="workOrderFeedbackDetails[k].realStaff"
                               ng-blur="checkRealStaff(k)"
                               required>
                        人 X
                        <input type="number" class="" style="width:20%;
                        display:inline-block;border:1px solid #ddd;"  required
                               ng-model="workOrderFeedbackDetails[k].realHour"
                               ng-blur="checkRealHour(k)">
                        小时
                    </span>
                </div>
                <span  style="margin-top:10px;display: inline-block;width: 99%;height: 4px;background-color: #eee"></span>
            </div>
            <div class="approver-content-wrap" ng-if="toType=='toProdprep'&&producePrepareOrders.length>0">
                <div style="color: #000;width: 100%;border-color:#fff">准备单计划总人工时
                    <span  style="margin-left: 20px" ng-bind="planSum">18</span>
                </div>
                <div style="color: #000;width: 100%;border-color:#fff">准备单实际总人工时
                    <span  style="margin-left: 20px" ng-bind="totalSum">15</span>
                </div>
                <div style="color: #000;width: 100%;border-color:#fff">非准备单人工时
                    <span  style="margin-left: 20px">
                        <input type="number" class=""
                               style="width:20%;display:inline-block;border: 1px solid #ddd;"
                               ng-model="workOrderFeedbackDetails[workOrderFeedbackDetails.length-1].realStaff"
                               required ng-blur="checkRealStaff(workOrderFeedbackDetails.length-1)">
                        人 X
                        <input type="number" class="" style="width:20%;
                        display:inline-block;border:1px solid #ddd;"
                               ng-model="workOrderFeedbackDetails[workOrderFeedbackDetails.length-1].realHour" required
                               ng-blur="checkRealHour(workOrderFeedbackDetails.length-1)">
                        小时
                    </span>
                </div>
                <div class="header" style="color:#000;width: 100%;border-color:#fff">TO总人工时
                    <span  style="margin-left: 20px" ng-bind="mrInfo.hours">18</span>人工时
                </div>
            </div>

        </div>
        <div class="approver-content-wrap">
            <div class="flex-layout-between"  style="background-color: #ffffff;justify-content: space-between;position: relative;display: block;width: 48.5%;padding:  .09rem .2rem ;margin:.4rem 0;float: left;">
                <div style="font: 0.7rem '微软雅黑';height: 2rem;line-height: 2rem;width: 5rem ;display: inline-block;">DM:</div>
                <div style="font: 0.7rem '微软雅黑';height: 2rem;line-height: 2rem;width: 3rem ;display: inline-block;float: right" ng-if="mrInfo.isDm == 'DM'">是</div>
                <div style="font: 0.7rem '微软雅黑';height: 2rem;line-height: 2rem;width: 3rem ;display: inline-block;float: right" ng-if="mrInfo.isDm == 'n'">否</div>
            </div>
            <div class="flex-layout-between"  style="background-color: #ffffff;justify-content: space-between;position: relative;display: block;width: 48.5%;padding:  .09rem .2rem ;margin:.4rem .45rem .4rem 0;float: right;">
                <div style="font: 0.7rem '微软雅黑';height: 2rem;line-height: 2rem;width: 5rem ;display: inline-block;">ATA:</div>
                <div style="font: 0.7rem '微软雅黑';height: 2rem;line-height: 2rem;width: 3rem ;display: inline-block;float: right">{{mrInfo.ata}}</div>
            </div>
            <select-person person-info="mrInfo" show-title="false" person-title="工作者"></select-person>

            <div class="select-require-date-wrap pad-style" >   <!--        ng-class="{'no-edit': !isCreateData}"-->
                <div class="require-date-title">完工日期<span class="red">*</span></div>
                <input type="datetime-local"
                       class="form-control select-require-date framecolor padding-fixed"
                       name="dateFound"
                       ng-if="android"
                       ng-model="mrInfo.completeDate"
                       ng-max="today"
                       required />
                <input type="datetime-local"
                       class="form-control select-require-date framecolor padding-fixed"
                       name="dateFound"
                       ng-if="!android"
                        style="width: 80%"
                       ng-model="mrInfo.completeDate"
                       ng-max="today"
                       required />
                <div class="triangle-down"></div>
            </div>
            <div class="datebox-wrap"  ng-if="toType=='toProdprepNo'">
                <div class="approver-title">人工时<span class="red">*</span></div>
                <input type="number" class="form-control search-textbox framecolor"  placeholder="请输入人工时" required
                       ng-model="mrInfo.hours" name="hours" ng-pattern="/^([1-9]\d*|0)(\.\d{1,1})?$/" ng-blur="checkError(!myForm['hours'].$error.required && myForm['hours'].$invalid, 'hours')" >
            </div>
            <div class="datebox-wrap" style="width: 80%;"
                 ng-if="toType=='toProdprep'&&producePrepareOrders.length==0">
                <div>
                    <div class="approver-title">人工时<span class="red">*</span></div>
                    <input type="number"
                           style="margin-left:20px;margin-top:6px;width:20%;display:inline-block;height:30px;border:
                           1px
                           solid #ddd;"
                           ng-model="workOrderFeedbackDetails[workOrderFeedbackDetails.length-1].realStaff"
                           required ng-blur="checkRealStaff(workOrderFeedbackDetails.length-1)">
                    人 X
                    <input type="number" class="" style="width:20%;height: 30px;
                        display:inline-block;border:1px solid #ddd;"
                           ng-model="workOrderFeedbackDetails[workOrderFeedbackDetails.length-1].realHour" required
                           ng-blur="checkRealHour(workOrderFeedbackDetails.length-1)">
                    小时
                </div>

            </div>
            <select-person person-info="inspector" show-title="false" person-title="检验员"  ng-show="isRci_isRii == 1 || isRci_isRii == 2"></select-person>

        </div>
        <!--必捡isRii 互捡isRci-->
        <div class="tail-eng-wrap fault-check-button inline-block" style="padding-left: 0.35rem;padding-right: .3rem">
            <div class="tail-eng-title">必检/互检<span class="red">*</span></div>
            <div class="tail-eng-button averageArange">
                <button type="button" ng-class="{beClicked: isRci_isRii == 1}" ng-click="isRci_isRii = 1"
                        >必检
                </button>
                <button type="button" ng-class="{beClicked: isRci_isRii == 2}" ng-click="isRci_isRii = 2"
                        >互检
                </button>
            </div>
        </div>
        <div class="damage-draft-detail" style="margin-bottom: 5px;margin-top: 5px">
            <div class="section-1">
                <div class="header" style="color: #000">TO反馈信息<span class="red">*</span></div>
            </div>
        </div>
        <div class="add-remark-wrap">
            <div class="p-name">
                <div class="name">描述</div>
            </div>
            <div class="add-remark-content">
                <textarea ng-model="mrInfo.descriptionShow" maxlength="500" readonly></textarea>
            </div>
        </div>
        <div class="damage-draft-detail" style="margin-bottom: 5px;margin-top: 5px">
            <div class="section-1">
                <div class="header" style="color: #000">反馈信息</div>
            </div>
        </div>
        <div class="add-remark-wrap">
            <div class="add-remark-content">
                <textarea ng-model="mrInfo.feedbackCh" maxlength="500"></textarea>
            </div>
        </div>
        <div class="p-image">
            <div ng-if="cc_data.toBaseInfoVO.type == 5" class="header" style="color: #333">附件：<span class="red">*</span></div>
            <p ng-if="cc_data.toBaseInfoVO.type == 5">
                请上传航材的铭牌部分以及实物六个面的清晰照片，若有附属部件例如固定件之类的，要对附属部件拍照存档上传。
            </p>
            <!--<img-select img-arr="imgArr" file-arr="fileArr" del-img-id="delImgId" is-api-cloud="isApiCloud" attachvo="attachvo"></img-select>-->
            <newimg-upload is-api-cloud="false"  nrc-id="nrcId" is-edit="true" up-way="taskupWay" file-list = "fileList" img-array="imgArr" file-arr="fileArr" del-img-id="delImgId"  attachvo="attachvo"></newimg-upload>

        </div>
        <div class="damage-draft-detail" style="margin-bottom: 5px;margin-top: 5px">
            <div class="section-1">
                <div class="header" style="color: #000">无照片备注</div>
            </div>
        </div>
        <div class="add-remark-wrap">
            <div class="add-remark-content">
                <textarea ng-model="mrInfo.mechanicNoPhotoRemark" maxlength="500"></textarea>
            </div>
        </div>
        <div class="damage-draft-detail" style="margin-top: 10px;margin-bottom: 0px;">
            <div class="section-1">
                <div class="header" style="color: #000">TLB：</div>
            </div>
        </div>
        <div ng-if="cc_data.type != 'STA'" class="damage-draft-detail" style="margin-bottom: 0px;margin-top: 0px">
            <div class="section-1">
                <div class="header" style="color: #000;background-color: #fff;border-bottom: 2px solid #CBCBCB" ng-repeat="tlb in cc_data.tlbList">TLB NO：<span ng-bind="tlb.tlbNo"   ng-click="goAddOrDetail(tlb)" style="color: red"></span><div ng-click="tlb_delete(tlb.tlbId)" style="text-align: center;line-height: 18px; float: right;margin-right: 12px;color: red;width: 22px;height: 22px;border-radius: 10px;border: 1.5px solid red;font-size: 20px;font-weight: bold">×</div></div>
            </div>
        </div>
        <div ng-if="cc_data.type != 'STA'" class="ui-edit ng-scope" >
            <div class="add-cc-btn" ng-click="addTlb()">
                <p><i class="icon-add-cc"></i><span>Add TLB</span></p>
            </div>
        </div>

        <div ng-if="cc_data.type == 'STA'" class="damage-draft-detail" style="margin-bottom: 0px;margin-top: 0px">
            <div class="section-1">
                <div class="header" style="color: #000;background-color: #fff;border-bottom: 2px solid #CBCBCB" ng-repeat="cc in cc_data.ccVos">
                    CC：<span ng-bind="cc.ccNo" ng-if="cc.ccNo"  ng-click="goCcDetail(cc)" style="color: red"></span><span  ng-if="!cc.ccNo"  ng-click="goCcDetail(cc)" style="color: red">view{{$index+1}}</span>
                    <div ng-click="cc_delete(cc.id)" style="text-align: center;line-height: 18px; float: right;margin-right: 12px;color: red;width: 22px;height: 22px;border-radius: 10px;border: 1.5px solid red;font-size: 20px;font-weight: bold">×</div>
                </div>
            </div>
        </div>
        <div ng-if="cc_data.type == 'STA'" class="ui-edit ng-scope" >
            <div class="add-cc-btn" ng-click="addcc()">
                <p><i class="icon-add-cc"></i><span>Add CC</span></p>
            </div>
        </div>
    </form>
    <button class="submitAddMR orange-button" ng-click="subimt_nrc(1)" style="display:inline-block;width:45%;margin:3rem 0 0 0.5rem;">保存</button>
    <button class="submitAddMR orange-button" ng-click="subimt_nrc(2)" style="display:inline-block;width:45%;margin:3rem 0 0 0.5rem;">关闭任务</button>

</div>
