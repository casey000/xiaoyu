<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head id="i18n_" module="SC_I18N">
    <!--#include virtual="/views/items/resource_.shtml"-->
    <title>工程首页</title>
    <link rel="stylesheet" href="/css/main.css">
    <script type="text/javascript">

    </script>
</head>
<body class="ibody">
<div id="tt" class="easyui-tabs" style="width:100%; height: 100%">
    <!--<div id="mlayout" class="easyui-layout"  style="height: 100%;">-->
    <fieldset class="fieldset_eui">
        <legend data-i18n="common:COMMON_OPERATION.SEARCH">搜索</legend>
        <form id="ffSearch" class="form-horizontal">
            <table cellspacing="0" cellpadding="2" class="table table-bordered table-info">
                <tr>
                    <th class="th" style="width:100px;" align="right">业务模块：</th>
                    <td style="width:100px; padding: 3px;">
                        <input class="easyui-textbox" id="modelName" name="modelName" style="width:130px;"/>
                    </td>
                    <th class="th" style="width:85px;" align="right">责任工程师：</th>
                    <td style="width:100px; padding: 3px;">
                        <input class="easyui-textbox" id="evaManName" name="evaManName" style="width:100px;"/>
                    </td>
                    <th class="th" style="width:85px;" align="right">专业：</th>
                    <td style="width:100px; padding: 3px;">
                        <input class="easyui-textbox" id="roleName" name="roleName" style="width:100px;"/>
                    </td>
                    <td colspan="2">
                        &nbsp;
                        <a class="searchBtn" type="button" onclick="searchData()" data-options="iconCls:'icon-search'">
                            <span data-i18n="common:COMMON_OPERATION.QUERY">查询</span>
                        </a>
                        &nbsp;&nbsp;
                        <a class="clearBtn" onclick="doClear_()" data-options="iconCls:'icon-clear'">
                            <span data-i18n="common:COMMON_OPERATION.RESET">重置</span>
                        </a>
                    </td>

                </tr>
            </table>
        </form>
    </fieldset>
    <!--<div id="lay_left" data-options="region:'west',split:false" style="width: 100%;">-->
        <div class="panel-title panel-with-icon">系统概要</div>
    <table id="dg"></table>
    <!--</div>-->

</div>
</body>
<script type="text/javascript" src="/js/datagrid_utils.js"></script>
<script type="text/javascript">
    var param = {};
    var loginInfo=getLoginInfo();
    var parentId = '';

    function i18nCallBack() {

        InitFuncCodeRequest_({
            data: {domainCode: "DA_ACNO", FunctionCode: "ANALYSIS_DOMAIN_BYCODE"},
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    $('#acno').combobox({
                        panelHeight: '80px',
                        data: jdata.data.DA_ACNO,
                        valueField: 'VALUE',
                        textField: 'TEXT'
                    });
                }
                else {
                    MsgAlert({content: jdata.msg, type: 'error'});
                }
            }
        });
        InitDataGrid(0);
    }
    function InitDataGrid(biz_type) {
        $("#dg").MyDataGrid({
            fitColumns:true,
            identity: 'dg',
            sortable: false,
            singleSelect: false,
            pagination: true,
            queryParams: {MENU_ID:parentId},
            columns: {
                param: {FunctionCode: 'WS_SYS_SUMMARY_LIST'},
                alter: {
                }
            },
            rowStyler: function(index,row){
                if ((index % 2)==0){
                    return 'background-color:#fbc9a7;color:gray;font-weight:bold;';
                }
                else{
                    return 'color:gray;font-weight:bold;';
                }
            },
            onDblClickRow: function (index, field, value) {
                openDetai("view", value.EVA_MAN_ID,value.MODEL_ID);
            }
        });

    }
    //待办详情
    function openDetai(operation, evaManId,modelName) {
        var title_ = $.i18n.t('待办详情');
        ShowWindowIframe({
            width: "950",
            height: "700",
            title: title_,
            param: {operation: operation, evaManId: evaManId,modelName},
            url: "/views/system/summary_index_detail.shtml"
        });
    }

    function reload_(){
        $("#dg").datagrid("reload");
    }

    //刷新
    function reload_() {
        $("#dg").datagrid("reload");
    }

    //查询
    function searchData() {
        onSearch_('dg', '#ffSearch');
    }

    //重置
    function doClear_() {
        $("#ffSearch").form('clear');
        searchData();
    }
</script>
</html>