<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head id="i18n_" module="">
    <!--#include virtual="/views/items/resource_.shtml"-->
    <title>选取航材类型</title>
    <script type="text/javascript" src="/js/datagrid_utils.js"></script>
    <script type="text/javascript" src="/js/td/jobcard/eojc/tdJcSelectCep.js"></script>
</head>
<style type="text/css">

    .buttonclass {
        width: 45px;
        height: 20px;
        margin-left: 3px;
        vertical-align: middle;
        border: 1px solid #cfcfcf;
        -moz-border-radius: 5px;
        border-radius: 5px;
        backgroud: #d5d5d5;
    }
</style>
<body>
<div>
    <div class="ibox float-e-margins">
        <div class="ibox-content">
            <form>
                <div style="margin-top: 10px;margin-right:10px;text-align: right">
                    <input type="button" id="next" class="buttonclass" onclick="copyMT()" value="确定"/>
                </div>
                <fieldset
                        style="border: 1px solid #99BBE8; width:328px; margin-top:10px;margin-left:10px; padding:5px;">
                    <legend style="color:#4E7FB6;margin-left:20px;">航材类型</legend>
                    <div style="float:left;margin:5px;padding-left: 14px;width: 304px;" id="MChoose">
                        <span style="float: left;">航材</span><input type="checkbox" id="material" name="material"
                                                                   value="MA"
                                                                   style="float: left;margin: 3px 0px 0px 5px;"/>
                    </div>
                    <div style="float:left;margin:5px;padding-left: 14px;width: 304px;" id="TChoose">
                        <span style="float: left;">工具</span><input type="checkbox" id="tool" name="tool"
                                                                   value="TEORDEVICE"
                                                                   style="float: left;margin: 3px 0px 0px 5px;"/>
                    </div>
                </fieldset>
            </form>
        </div>
    </div>
</div>
</body>
<script type="text/javascript">
    var param = {};
    var originId;
    var newId;
    function i18nCallBack() {
        param = getParentParam_();
        originId = param.originJcId;
        newId = param.newJcId;
    }

    //确定--选取航材类型,开始复制航材信息
    function copyMT() {
        var material, tool;
        if (!$("#material").is(':checked') && !$("#tool").is(':checked')) {
            MsgAlert({content: "航材类型至少得选择一种！", type: 'error'});
            return;
        }
        if ($("#material").is(':checked')) {  //获取类型为航材
            material = $("#material").attr("value");
        } else {
            material = "";
        }
        if ($("#tool").is(':checked')) { //获取类型为工具
            tool = $("#tool").attr("value");
        } else {
            tool = "";
        }
        if (!confirm("复制航材会删除当前工卡下对应类型的航材信息，是否继续？")) {
            return;
        }
        InitFuncCodeRequest_({
            data: {
                material: material,
                tool: tool,
                originId: originId,
                newId: newId,
                FunctionCode: 'TD_COPY_OTHER_MT_INFO'
            },
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    MsgAlert({content: $.i18n.t('msg_tip:TIP.COMMON.OPT_SUCCESS')});
                    CloseWindowIframe();
                    param.OWindow.closeCurrentWindow();
                } else {
                    MsgAlert({content: jdata.msg, type: 'error'});
                }
            }
        });
    }

</script>
</html>