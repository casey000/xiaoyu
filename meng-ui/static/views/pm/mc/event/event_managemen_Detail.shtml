<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN"
        "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head id="i18n_" module="pm_mplanconf">
    <!--#include virtual="/views/items/resource_.shtml"-->
    <script type="text/javascript" src="/js/datagrid_utils.js"></script>
    <title>轮胎扎伤报告管理详情页</title>
</head>
<body>
<div style="width:95%;margin:0 auto;">
    <div class="ibox-content">
        <form class="form-horizontal m-t" id="mform">
            <div id="p0" class="easyui-panel" title="轮胎扎伤报告" style="width: 100%"></div>
            <input type="hidden" id="pkid" name="pkid">
            <input type="hidden" id="rev" name="rev">
            <input type="hidden" id="status" name="status">
            <input type="hidden" name="inputerId">
            <input type="hidden" name="inputerName">
            <input type="hidden" name="inputerTime">
            <table class="table table-bordered table-info">
                <tr>
                    <td align="right" style="padding: 6px;">
                        <input class="btn btn-primary" id="saveBtn"
                               type="button" onclick="save();" value="保存"/>&nbsp;
                        <input class="btn btn-primary" id="closeBtn"
                               type="button"
                               onclick="closeAdd();" value="关闭"/>
                        <input class="btn btn-primary" id="closeBrowse"
                               type="button"
                               onclick=" CloseWindowIframe();" value="关闭"/>
                    </td>
                </tr>
            </table>
            <table class="table table-bordered table-info">
                <tr id="copyTr">
                    <th class="th" align="right" style="width: 150px">报告单位：</th>
                    <td class="tdr hs" style="width:150px">
                        <input class="easyui-textbox" id="reporting_unit"
                               name="reporting_unit" data-options="editable:false,onlyview:true,required:true"
                               style="width:150px;"/>
                    </td>
                    <th class="th" align="right" style="width: 150px">公司简称：</th>
                    <td class="tdr hs" style="width:150px">
                        <input class="easyui-textbox" id="company_shortName"
                               style="width:150px;" data-options="required:true,editable:false,onlyview:true"
                               name="company_shortName"
                        />
                    </td>
                    <th class="th" align="left" style="width: 150px">编号：</th>
                    <td class="tdr hs" style="width:200px">
                        <input class="easyui-textbox" id="fodNo"
                               name="fodNo" data-options="editable:false,onlyview:true" style="width:150px;">
                    </td>
                </tr>
                <tr>
                    <th class="th" align="right">机号：</th>
                    <td class="tdr hs">
                        <input class="easyui-combobox" id="acno" name="acno"
                               data-options="onChange:getActype,required:true"
                               style="width:150px;"/>
                    </td>
                    <th class="th" align="right">机型：</th>
                    <td class="tdr hs">
                        <input class="easyui-textbox" id="actype"
                               name="actype" data-options="required:true,editable:false"
                               style="width:150px;"/>
                    </td>
                    <th class="th" align="right">航班号：</th>
                    <td class="tdr hs">
                        <input class="easyui-textbox" id="flightNo"
                               name="flightNo" data-options="readonly: true,onlyview:true,required:true"
                               style="width:150px;"/>
                        <a class="easyui-linkbutton" href="javascript:" style="height: 20px"
                           iconCls="icon-search" id="openSBList"
                           onclick="getFlightNo();"></a>
                    </td>
                </tr>
                <tr>
                    <th class="th" align="right">起飞机场：</th>
                    <td class="tdr hs">
                        <input class="easyui-textbox" id="takeOn"
                               name="takeOn" data-options="readonly: true,onlyview:true,required:true"
                               style="width:150px;"/>
                    </td>
                    <th class="th" align="right">落地机场：</th>
                    <td class="tdr hs">
                        <input class="easyui-textbox" id="takeOff"
                               name="takeOff" data-options="readonly: true,onlyview:true,required:true"
                               style="width:150px;"/>
                    </td>
                    <th class="th" align="right">发现时间：</th>
                    <td class="tdr hs">
                        <input class="easyui-datetimebox" id="occurDate" name="occurDate"
                               data-options="required:true,editable:false" style="width:150px;"/>
                    </td>
                </tr>
                <tr>
                    <th class="th" align="right">受损轮胎位置：</th>
                    <td class="tdr hs" colspan="5">
                        <table>
                            <tr>
                                <td class="tdr hs">
                                    <lable>&nbsp;&nbsp;1.&nbsp;&nbsp;</lable>
                                    <input type="checkbox" id="frontLand"/>
                                    <lable>&nbsp;&nbsp;前轮&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;位置编号：</lable>
                                    <input class="easyui-textbox" id="frontLocation"
                                           name="frontLocation" data-options="readonly:true,onlyview:true,validType:['maxLength[60]']"/></td>
                                <td class="tdr hs">
                                    <lable>&nbsp;&nbsp;2.&nbsp;&nbsp;</lable>
                                    <input type="checkbox" id="leftLand"/>
                                    <lable>&nbsp;&nbsp;左主轮&nbsp;&nbsp;&nbsp;&nbsp;位置编号：</lable>
                                    <input class="easyui-textbox" id="leftLocation"
                                           name="leftLocation" data-options="readonly:true,onlyview:true,validType:['maxLength[60]']"
                                           style="width: 255px"/>
                                </td>
                            </tr>
                            <tr>
                                <td class="tdr hs" colspan="2">
                                    <lable>&nbsp;&nbsp;3.&nbsp;&nbsp;</lable>
                                    <input type="checkbox" id="rightLand"/>
                                    <lable>&nbsp;&nbsp;右主轮&nbsp;&nbsp;&nbsp;&nbsp;位置编号：</lable>
                                    <input class="easyui-textbox" id="rightLocation"
                                           name="rightLocation" data-options="readonly:true,onlyview:true,validType:['maxLength[60]']"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <th class="th" align="right">受损部位形状：</th>
                    <td class="tdr hs" colspan="2">
                        <input class="easyui-textbox" id="partShape"
                               name="partShape" data-options="required:true,validType:['maxLength[300]']" style="width: 250px;"/>
                    </td>
                    <th class="th" align="right">受损部位尺寸：</th>
                    <td class="tdr hs" colspan="2">
                        <input class="easyui-textbox" id="partSize"
                               name="partSize" data-options="required:true,validType:['maxLength[300]']" style="width: 305px;"/>
                    </td>
                </tr>
                <tr>
                    <th class="th" align="right">受损处处理：</th>
                    <td class="tdr hs" colspan="5">
                        <lable>&nbsp;&nbsp;&nbsp;&nbsp;1.&nbsp;&nbsp;</lable>
                        <input type="radio" id="excessive" name="damage_disposal"/>
                        <lable>&nbsp;&nbsp;超标更换轮胎</lable>
                        <lable>&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;2.&nbsp;&nbsp;</lable>
                        <input type="radio" id="no_excessive" name="damage_disposal"/>
                        <lable> &nbsp;&nbsp;未超标完成标记 &nbsp;&nbsp;</lable>
                    </td>
                </tr>
                <tr>
                    <th class="th" align="left">受损轮胎有无携带外来物：</th>
                    <td class="tdr hs" colspan="5">
                        <table>
                            <tr>
                                <td class="tdr hs">
                                    <lable>&nbsp;&nbsp;1.&nbsp;&nbsp;</lable>
                                    <input type="radio" id="no_particle" name="particle"/>
                                    <lable>&nbsp;&nbsp;无外来物&nbsp;&nbsp;</lable>
                                </td>
                            </tr>
                            <tr>
                                <td class="tdr hs" colspan="2">
                                    <lable>&nbsp;&nbsp;2.&nbsp;&nbsp;</lable>
                                    <input type="radio" id="yes_particle" name="particle"/>
                                    <lable>&nbsp;&nbsp;有外来物&nbsp;&nbsp;外来物是：</lable>
                                    <input type="checkbox" id="stone" disabled="true"/>
                                    <lable>石头&nbsp;&nbsp;</lable>
                                    <input type="checkbox" id="ironNail" disabled="true"/>
                                    <lable>铁钉&nbsp;&nbsp;</lable>
                                    <input type="checkbox" id="nut" disabled="true"/>
                                    <lable>螺帽&nbsp;&nbsp;</lable>

                                    <input type="checkbox" id="other_thing" disabled="true"/>
                                    <lable>&nbsp;&nbsp;&nbsp;其他&nbsp;&nbsp;</lable>
                                    <input class="easyui-textbox" id="other_explain"
                                           style="width:380px;" name="other_explain"
                                           data-options="readonly:true,onlyview:true,validType:['maxLength[300]']"/>
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <th class="th" align="right">有无照片取证：</th>
                    <td class="tdr hs" colspan="5">
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="radio" id="yes_phone" name="image_forensics"/>
                        <lable>&nbsp;&nbsp;有</lable>
                        &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        <input type="radio" id="no_phone" name="image_forensics"/>
                        <lable> &nbsp;&nbsp;无 &nbsp;&nbsp;</lable>
                    </td>
                </tr>
                <tr>
                    <div id="div1" onclick="GetZone()">
                        <input id="zonestr" name="zonestr" type="hidden" style="display: none"/>
                        <th class="th" align="right">初步分析：</th>
                        <td class="tdr hs" colspan="5">
                            <table>
                                <tr>
                                    <td class="tdr hs">
                                        <label>&nbsp;&nbsp;1.&nbsp;&nbsp;</label>
                                        <input type="radio" id="new_wound" name="analysis_wound"/>
                                        <lable>&nbsp;&nbsp;伤口为新伤&nbsp;&nbsp;</lable>
                                    </td>
                                    <td class="tdr hs">
                                        <label>&nbsp;&nbsp;2.&nbsp;&nbsp;</label>
                                        <input type="radio" id="old_wound" name="analysis_wound"/>
                                        <lable>&nbsp;&nbsp;伤口为老伤&nbsp;&nbsp;</lable>
                                    </td>
                                    <td class="tdr hs">
                                        <label>&nbsp;&nbsp;3.&nbsp;&nbsp;</label>
                                        <input type="radio" id="tire_aging" name="analysis_wound"/>
                                        <lable> &nbsp;&nbsp;轮胎老化所致&nbsp;&nbsp;</lable>
                                    </td>
                                </tr>
                                <tr>
                                    <td class="tdr hs" colspan="3">
                                        <label>&nbsp;&nbsp;4.&nbsp;&nbsp;</label>
                                        <input type="radio" id="else_thing_explain" name="analysis_wound"/>
                                        <lable>&nbsp;&nbsp;&nbsp;其他情况说明&nbsp;&nbsp;</lable>
                                        <input class="easyui-textbox" id="otherInformation"
                                               name="otherInformation" style="width:630px;"
                                               data-options="readonly:true,onlyview:true,validType:['maxLength[600]']"/>
                                    </td>
                                </tr>
                            </table>
                        </td>
                    </div>
                </tr>
                <tr>
                    <th class="th" align="right">报告情况：</th>
                    <td class="tdr hs" colspan="5">
                        <table>
                            <tr>
                                <td class="tdr hs">
                                    <label>&nbsp;&nbsp;1.&nbsp;&nbsp;</label>
                                    <input type="checkbox" id="reported_mcc"/>
                                    <lable>&nbsp;&nbsp;已报告MCC&nbsp;&nbsp;&nbsp;&nbsp;报告时间：</lable>
                                    <input class="easyui-numberbox" id="report_mcc_h"
                                           name="report_mcc_h" style="width:100px;"
                                           data-options="readonly:true,onlyview:true,min:0,max:23,validType:['maxLength[2]']"/>时
                                    <input class="easyui-numberbox" id="report_mcc_m"
                                           name="report_mcc_m" style="width:100px;"
                                           data-options="readonly:true,onlyview:true,min:0,max:59,validType:['maxLength[2]']"/>分
                                </td>
                            </tr>
                            <tr>
                                <td class="tdr hs">
                                    <label>&nbsp;&nbsp;2.&nbsp;&nbsp;</label>
                                    <input type="checkbox" id="reported_hab"/>
                                    <lable>&nbsp;&nbsp;已报告当地机场相关管理部门&nbsp;&nbsp;报告时间：</lable>
                                    <input class="easyui-numberbox" id="report_hab_h"
                                           name="report_hab_h" style="width:100px;"
                                           data-options="readonly:true,onlyview:true,min:0,max:23,validType:['maxLength[2]']"/>时
                                    <input class="easyui-numberbox" id="report_hab_m"
                                           name="report_hab_m" style="width:100px;"
                                           data-options="readonly:true,onlyview:true,min:0,max:59,validType:['maxLength[2]']"/>分
                                </td>
                            </tr>
                        </table>
                    </td>
                </tr>
                <tr>
                    <th class="th" align="right" style="width: 80px;">填表人：</th>
                    <td class="tdr hs" colspan="2">
                        <input class="easyui-textbox" id="reportName"
                               name="reportName" data-options="editable:false,onlyview:true" style="width: 250px;"/>
                    </td>
                    <th class="th" align="right">联系电话：</th>
                    <td class="tdr hs" colspan="2">
                        <input class="easyui-textbox" id="reportTel"
                               name="reportTel" data-options="validType:['maxLength[60]']" style="width: 305px;"/>
                    </td>
                </tr>
                <tr>
                    <th class="th" align="right">描述：</th>
                    <td class="tdr hs" colspan="5">
                        <input class="easyui-textbox" colspan="6"
                               rowspan="3" id="fodDes" name="fodDes"
                               style="height:55px; width: 770px;"
                               data-options="validType:['maxLength[2000]']"/>
                    </td>
                </tr>
            </table>
        </form>
    </div>
    <script type="text/javascript">
        var param;
        var operation;
        var PAGE_DATA = {};
        var ACNO;
        var pkid = null;//主表PKID
        //当前版本号，用于修改保存
        var p_rev;
        var p_status;
        function i18nCallBack() {
            param = getParentParam_();
            operation = param.operation;
            pkid = param.pkid;
            $("#pkid").val(pkid);

            $('#reporting_unit').textbox('setValue', "顺丰航空有限公司");
            $('#company_shortName').textbox('setValue', "顺丰航空");
            //动态生成填表人及ID
            try {
                if(param.operation != 'view' && param.operation != 'browse'){
                    var name = getLoginInfo().userName;
                    var accountId = getLoginInfo().accountNumber;
                    var nameId = name + "(" + accountId + ")";
                    $('#reportName').textbox('setValue', nameId);
                }
            } catch (e) {
                console.log(e)
            }
            //根据页面要求对单选框和复选框中文本框进行初始化
            initForm();

            InitFuncCodeRequest_({
                data: {
                    domainCode: "DA_ACREG_MAN_ACNO,MSGRP",
                    FunctionCode: "ANALYSIS_DOMAIN_BYCODE"
                },
                successCallBack: function (jdata) {
                    if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                        //获取机号下拉框的值
                        // PAGE_DATA['acno'] = DomainCodeToMap_(jdata.data["DA_ACREG_MAN_ACNO"]);
                        // ACNO
                        ACNO = $("#acno").combobox("getValue");
                        //机号
                        $('#acno').combobox({
                            panelHeight: '135px',
                            data: jdata.data.MSGRP,
                            valueField: 'VALUE',
                            textField: 'TEXT'
                        });

                        pkid = $("#pkid").val();
                        if (pkid) {
                            InitDataForm(pkid, operation);
                        }
                        if (operation == "browse") {
                            $("#closeBtn").hide();
                            $("#saveBtn").hide();
                            $("#submitBtn").hide();
                            //遍历input标签成不可编辑的
                            noEditable();
                            //双击进入状态
                        } else if (operation == "view") {
                            $("#closeBtn").hide();
                            $("#saveBtn").hide();
                            $("#submitBtn").hide();
                        } else {
                            $("#closeBrowse").hide();
                        }

                    }
                }
            });
        }

        //回显数据
        function InitDataForm(pkid, operation) {
            InitFuncCodeRequest_({
                data: {pkid: pkid, FunctionCode: "MANAGEMEN_PKID"},
                successCallBack: function (jdata) {
                    if (jdata.code == RESULT_CODE.SUCCESS_CODE) {

                        //得到当前版本及状态
                        p_rev = jdata.data.REV;
                        p_status = jdata.data.STATUS;

                        //给所有对应表单name属性的值赋值
                        ParseFormField_(jdata.data, $("#mform"), Constant.CAMEL_CASE);

                        //给对应的单选框和复选框赋值
                        setButtonValue(jdata);

                    } else {
                        MsgAlert({content: jdata.msg, type: 'error'});
                    }
                }
            });
        }

        //浏览不可编辑  遍历所有input标签
        function noEditable() {
            // document.getElementsByTagName("input").disabled = true;
            //也可以把表单变成不可编辑
            // $("#fleet").combobox({editable: false, onlyview: true});
            $('#reporting_unit').textbox({
                disabled: true
            });
            $('#fodNo').textbox({
                disabled: true
            });
            $('#occurDate').datetimebox({
                disabled: true
            });
            $('#acno').combobox({
                disabled: true
            });
            $('#flightNo').textbox({
                disabled: true
            });
            $('#takeOn').textbox({
                disabled: true
            });
            $('#takeOff').textbox({
                disabled: true
            });
            $('#actype').textbox({
                disabled: true
            });
            $('#company_shortName').textbox({
                disabled: true
            });

            $('#frontLocation').textbox({
                disabled: true
            });
            $('#leftLocation').textbox({
                disabled: true
            });
            $('#rightLocation').textbox({
                disabled: true
            });
            $('#partShape').textbox({
                disabled: true
            });
            $('#partSize').textbox({
                disabled: true
            });

            $('#other_explain').textbox({
                disabled: true
            });

            $('#otherInformation').textbox({
                disabled: true
            });

            $('#report_mcc_h').textbox({
                disabled: true
            });
            $('#report_mcc_m').textbox({
                disabled: true
            });

            $('#report_hab_h').textbox({
                disabled: true
            });
            $('#report_hab_m').textbox({
                disabled: true
            });
            $('#reportName').textbox({
                disabled: true
            });
            $('#reportTel').textbox({
                disabled: true
            });
            $('#fodDes').textbox({
                disabled: true
            });
        }

        // 保存
        function save() {
            //对应表格是否取到全部值
            var isValidate = $("#mform").form('validate');
            if (!isValidate)
                return;
            //获得表单所有文本框及下拉框的值
            var total_mform = $("#mform").serializeObject();

            // 如果是改版状态的情况
            if (param.operation == "rev") {
                total_mform.rev = Number(p_rev) + 1;
            }
            //得到单选框和复选框的值
            getButtonValue(total_mform);

            //从一个对象中解析出字符串
            var mainData = JSON.stringify(total_mform);

            InitFuncCodeRequest_({
                data: {tpye: param.operation, mainData: mainData, FunctionCode: "PM_MC_FOD_ADD"},
                successCallBack: function (jdata) {
                    if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                        param.OWindow.reload_();
                        param.OWindow.MsgAlert({content: "轮胎扎伤数据保存成功"});
                        CloseWindowIframe();
                    } else {
                        MsgAlert({content: jdata.msg || "轮胎扎伤数据保存失败", type: 'error'});
                    }
                }
            });
        }

        //关闭 提示是否保存
        function closeAdd() {
            $.messager.confirm('', '是否保存', function (r) {
                if (r) {
                    //调用保存方法
                    save();
                } else {
                    //调用关闭方法
                    CloseWindowIframe();
                    //刷新页面
                    param.OWindow.reload_();
                    // $("#mform").form('clear');
                }
            });
        }

        //根据机号获取机型从飞机主数据库
        function getActype() {
            //得到机号的值
            ACNO = $("#acno").combobox('getValue');
            InitFuncCodeRequest_({
                data: {ACNO: ACNO, FunctionCode: "DA_ACREG_MAN_ACTYPE"},
                successCallBack: function (jdata) {
                    if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                        //判断查机型是否存在，防止为空
                        if (jdata && jdata.data) {
                            //给机型赋值
                            $('#actype').textbox("setValue", jdata.data.MP_ACTYPE)
                        }
                    }
                }
            })
        }

        //通过机号对航班号进行筛选
        function getFlightNo() {
            ACNO = $("#acno").combobox("getValue");
            if (ACNO == "") {
                MsgAlert({content: '请先选择机型', type: 'error'});
                return;
            }
            ShowWindowIframe({
                width: "800",
                height: "450",
                title: "航班号列表",
                param: {acReg: ACNO},
                url: "/views/common/select_fltno_list.shtml"
            });
        }

        //航班获取回调方法
        function queryFltno(rowData) {
            if (rowData && rowData.FLIGHT_NO) {
                $("#flightNo").textbox("setValue", rowData.FLIGHT_NO);
                $("#takeOn").textbox("setValue", rowData.FROM_STATION);
                $("#takeOff").textbox("setValue", rowData.TO_STATION);
            }
        }

        //单选框和复选框的转换存储数据库
        function getButtonValue(total_mform) {
            //受损轮胎位置
            //前轮的值Y
            if ($('#frontLand').prop('checked')) {
                total_mform.frontLand = "Y";
                //给前轮位置编号赋值 $("#acno").combobox("getValue");
                total_mform.frontLocation = $("#frontLocation").textbox("getValue");
            } else {
                total_mform.frontLand = "N";
            }
            //左轮的值"Y"
            if ($('#leftLand').prop('checked')) {
                total_mform.leftLand = "Y";
                //给左轮位置编号赋值 $("#acno").combobox("getValue");
                total_mform.leftLocation = $("#leftLocation").textbox("getValue");
            } else {
                total_mform.leftLand = "N";
            }
            //右轮的值"Y"
            if ($('#rightLand').prop('checked')) {
                total_mform.rightLand = "Y";
                //给右轮位置编号赋值 $("#acno").combobox("getValue");
                total_mform.rightLocation = $("#rightLocation").textbox("getValue");
            } else {
                total_mform.rightLand = "N";
            }
            // 受损处处理   超标更换轮胎1 未超标完成标记2
            if ($('#excessive').prop('checked')) {
                total_mform.isOverproof = 1;
            } else if ($('#no_excessive').prop('checked')) {
                total_mform.isOverproof = "2";
            }
            // 受损轮胎有无携带外来物    无外来物1 有外来物2 (石头：1，铁钉：2，螺帽：3，其他：4)
            if ($('#no_particle').prop('checked')) {
                total_mform.carryFod = 1;
            }
            if ($('#yes_particle').prop('checked')) {
                total_mform.carryFod = 2;
                var fodType = [];
                if ($('#stone').prop('checked')) {
                    fodType.push(1);
                }
                if ($('#ironNail').prop('checked')) {
                    fodType.push(2);
                }
                if ($('#nut').prop('checked')) {
                    fodType.push(3);
                }
                if ($('#other_thing').prop('checked')) {
                    fodType.push(4);
                    //给其他赋值
                    total_mform.otherFod = $("#other_explain").textbox("getValue");
                }

                total_mform.fodType = fodType.join(",");
            }
            //有无照片取证  有：1 无：0
            if ($('#yes_phone').prop('checked')) {
                total_mform.isPhoto = 1;
            }
            if ($('#no_phone').prop('checked')) {
                total_mform.isPhoto = 2;
            }

            //初步分析    伤口为新伤1  伤口为旧伤2  轮胎老化所致3  其他情况说明4  有点问题

            if ($('#new_wound').prop('checked')) {
                total_mform.analysisType = 1;
            } else if ($('#old_wound').prop('checked')) {
                total_mform.analysisType = 2;
            } else if ($('#tire_aging').prop('checked')) {
                total_mform.analysisType = 3;
            } else if ($('#else_thing_explain').prop('checked')) {
                total_mform.analysisType = 4;
                //给其他情况说明赋值
                total_mform.analysisOther = $("#otherInformation").textbox("getValue");
            }


            //已报告MCC  Y
            if ($('#reported_mcc').prop('checked')) {
                total_mform.mccReport = "Y";
                // 报告时间:时
                total_mform.mccReportH = $("#report_mcc_h").textbox("getValue");
                // 报告时间:分
                total_mform.mccReportM = $("#report_mcc_m").textbox("getValue");
            } else {
                total_mform.mccReport = "N";
            }
            //已报告当地机场相关管理部门  Y
            if ($('#reported_hab').prop('checked')) {
                total_mform.security = "Y";
                // 报告时间：时
                total_mform.securityH = $("#report_hab_h").textbox("getValue");
                // 报告时间:分
                total_mform.securityM = $("#report_hab_m").textbox("getValue");
            } else {
                total_mform.security = "N";
            }
        }

        //给对应的单选框复选框值做初始化
        function setButtonValue(jdata) {
            // 受损轮胎位置及编号
            // 前轮及位置编号
            if (jdata.data.FRONT_LAND == "Y") {
                //给fron_wheel该标签打钩
                $('#frontLand').prop('checked', true);
                // $('#frontLocation').textbox('readonly', false);
                $('#frontLocation').textbox('setValue', jdata.data.FRONT_LOCATION);
                $('#frontLocation').textbox({readonly: false});
                $('#frontLocation').textbox({onlyview: false});
            }
            //左主轮及位置编号
            if (jdata.data.LEFT_LAND == "Y") {
                $('#leftLand').prop('checked', true);
                // $('#leftLocation').textbox('readonly', false);
                $('#leftLocation').textbox('setValue', jdata.data.LEFT_LOCATION);
                $('#leftLocation').textbox({readonly: false});
                $('#leftLocation').textbox({onlyview: false});
            }
            //右主轮及位置编号
            if (jdata.data.RIGHT_LAND == "Y") {
                $('#rightLand').prop('checked', true);
                // $('#rightLocation').textbox('readonly', false);
                $('#rightLocation').textbox('setValue', jdata.data.RIGHT_LOCATION);
                $('#rightLocation').textbox({readonly: false});
                $('#rightLocation').textbox({onlyview: false});
            }

            //受损处处理 1=处理，2=不处理
            if (jdata.data.IS_OVERPROOF == 1) {
                $('#excessive').prop('checked', true);

            } else if (jdata.data.IS_OVERPROOF == 2) {
                $('#no_excessive').prop('checked', true);
            }

            //受伤轮胎有无携带外来物 1=无外来物，2=有外来物，石头1  铁钉2  螺帽3  其他4
            if (jdata.data.CARRY_FOD == 1) {
                $('#no_particle').prop('checked', true);
            } else if (jdata.data.CARRY_FOD == 2) {
                $('#yes_particle').prop('checked', true);
                var fod_type = jdata.data.FOD_TYPE;
                if (fod_type) {
                    if (fod_type.indexOf("1") != -1) {
                        $('#stone').prop('checked', true);
                    }
                    if (fod_type.indexOf("2") != -1) {
                        $('#ironNail').prop('checked', true);
                    }
                    if (fod_type.indexOf("3") != -1) {
                        $('#nut').prop('checked', true);
                    }
                    if (fod_type.indexOf("4") != -1) {
                        $('#other_thing').prop('checked', true);
                        $('#other_explain').textbox('setValue', jdata.data.OTHER_FOD);
                        $('#other_explain').textbox({readonly: false});
                        $('#other_explain').textbox({onlyview: false});
                    }
                }
                $('#stone').prop('disabled', false);
                $('#ironNail').prop('disabled', false);
                $('#nut').prop('disabled', false);
                $('#other_thing').prop('disabled', false);
            }
            // 有无照片取证    是否照片取证
            if (jdata.data.IS_PHOTO == 1) {
                $('#yes_phone').prop('checked', true);
            } else if (jdata.data.IS_PHOTO == 2) {
                $('#no_phone').prop('checked', true);
            }
            //初步分析 外来物扎伤初步分析 1、伤口为新伤 2、伤口为老伤 3、轮胎老化所致 4、其他情况说明
            if (jdata.data.ANALYSIS_TYPE == 1) {
                $('#new_wound').prop('checked', true);
            }
            if (jdata.data.ANALYSIS_TYPE == 2) {
                $('#old_wound').prop('checked', true);
            }
            if (jdata.data.ANALYSIS_TYPE == 3) {
                $('#tire_aging').prop('checked', true);
            }
            if (jdata.data.ANALYSIS_TYPE == 4) {
                $('#else_thing_explain').prop('checked', true);
                // $('#otherInformation').textbox('readonly', false);
                $('#otherInformation').textbox('setValue', jdata.data.ANALYSIS_OTHER);
                $('#otherInformation').textbox({readonly: false});
                $('#otherInformation').textbox({onlyview: false});
            }

            //报告情况
            // var reported_mcc = document.getElementsByName("reported_mcc");
            // var reported_hab = document.getElementsByName("reported_hab");
            if (jdata.data.MCC_REPORT == "Y") {
                $('#reported_mcc').prop('checked', true);
                // $('#report_mcc_h').textbox('readonly', false);
                // $('#report_mcc_m').textbox('readonly', false);
                $('#report_mcc_h').textbox('setValue', jdata.data.MCC_REPORT_H);
                $('#report_mcc_h').textbox({readonly: false});
                $('#report_mcc_h').textbox({onlyview: false});
                $('#report_mcc_m').textbox('setValue', jdata.data.MCC_REPORT_M);
                $('#report_mcc_m').textbox({readonly: false});
                $('#report_mcc_m').textbox({onlyview: false});
            }
            if (jdata.data.SECURITY == "Y") {
                $('#reported_hab').prop('checked', true);
                // $('#report_hab_h').textbox('readonly', false);
                // $('#report_hab_m').textbox('readonly', false);
                $('#report_hab_h').textbox('setValue', jdata.data.SECURITY_H);
                $('#report_hab_h').textbox({readonly: false});
                $('#report_hab_h').textbox({onlyview: false});
                $('#report_hab_m').textbox('setValue', jdata.data.SECURITY_M);
                $('#report_hab_m').textbox({readonly: false});
                $('#report_hab_m').textbox({onlyview: false});
            }
        }

        //根据页面要求对单选框和复选框中文本框进行初始化
        function initForm() {
            //受损轮胎位置
            //前轮
            $('#frontLand').change(function () {
                var checked = $('#frontLand').is(':checked');
                if (checked) {
                    $('#frontLocation').textbox({readonly: false});
                    $('#frontLocation').textbox({onlyview: false});
                } else {
                    $('#frontLocation').textbox({readonly: true});
                    $('#frontLocation').textbox({onlyview: true});
                }
                $('#frontLocation').textbox('setValue', '');
            });
            //左主轮
            $('#leftLand').change(function () {
                var checked = $('#leftLand').is(':checked');
                if (checked) {
                    $('#leftLocation').textbox({readonly: false});
                    $('#leftLocation').textbox({onlyview: false});
                } else {
                    $('#leftLocation').textbox({readonly: true});
                    $('#leftLocation').textbox({onlyview: true});
                }
                $('#leftLocation').textbox('setValue', '');
            });
            //右主轮
            $('#rightLand').change(function () {
                var checked = $('#rightLand').is(':checked');
                if (checked) {
                    $('#rightLocation').textbox({readonly: false});
                    $('#rightLocation').textbox({onlyview: false});
                } else {
                    $('#rightLocation').textbox({readonly: true});
                    $('#rightLocation').textbox({onlyview: true});
                }
                $('#rightLocation').textbox('setValue', '');
            });
            //   受损轮胎有无携带外来物   无外来物
            $('#no_particle').change(function () {
                var checked = $('#no_particle').is(':checked');
                if (checked) {
                    $('#stone').prop('disabled', true);
                    $('#ironNail').prop('disabled', true);
                    $('#nut').prop('disabled', true);
                    $('#stone').prop('checked', false);
                    $('#ironNail').prop('checked', false);
                    $('#nut').prop('checked', false);
                    $('#other_thing').prop('checked', false);
                    $('#other_thing').prop('disabled', true);
                    $('#other_explain').textbox({readonly: true});
                    $('#other_explain').textbox({onlyview: true});
                    $('#other_explain').textbox('setValue', '');
                }
            });
            //有外来物  外来物是  石头1     铁钉 2   螺帽 3    其他4
            $('#yes_particle').change(function () {
                var checked = $('#yes_particle').is(':checked');
                if (checked) {
                    $('#stone').prop('disabled', false);
                    $('#ironNail').prop('disabled', false);
                    $('#nut').prop('disabled', false);
                    $('#other_thing').prop('disabled', false);

                } else {
                    $('#stone').prop('disabled', true);
                    $('#ironNail').prop('disabled', true);
                    $('#nut').prop('disabled', true);
                }
            });
            $('#other_thing').change(function () {
                if ($('#other_thing').is(':checked')) {
                    $('#other_explain').textbox({readonly: false});
                    $('#other_explain').textbox({onlyview: false});
                } else {
                    $('#other_explain').textbox({readonly: true});
                    $('#other_explain').textbox({onlyview: true});
                }
                $('#other_explain').textbox('setValue', '');
            });

            //初步分析 单选框选择其他的文本框值被清空和不可编辑
            $('#new_wound').change(function () {
                $('#otherInformation').textbox({readonly: true});
                $('#otherInformation').textbox({onlyview: true});
                $('#otherInformation').textbox('setValue', '');
            });
            $('#old_wound').change(function () {
                $('#otherInformation').textbox({readonly: true});
                $('#otherInformation').textbox({onlyview: true});
                $('#otherInformation').textbox('setValue', '');
            });
            $('#tire_aging').change(function () {
                $('#otherInformation').textbox({readonly: true});
                $('#otherInformation').textbox({onlyview: true});
                $('#otherInformation').textbox('setValue', '');
            });

            $('#else_thing_explain').change(function () {
                var checked = $('#else_thing_explain').is(':checked');
                if (checked) {
                    $('#otherInformation').textbox({readonly: false});
                    $('#otherInformation').textbox({onlyview: false});
                } else {
                    $('#otherInformation').textbox({readonly: true});
                    $('#otherInformation').textbox({onlyview: true});
                }
                $('#otherInformation').textbox('setValue', '');
            });
            //已报告MCC
            $('#reported_mcc').change(function () {
                var checked = $('#reported_mcc').is(':checked');
                if (checked) {
                    $('#report_mcc_h').textbox({readonly: false});
                    $('#report_mcc_h').textbox({onlyview: false});
                    $('#report_mcc_m').textbox({readonly: false});
                    $('#report_mcc_m').textbox({onlyview: false});
                } else {
                    $('#report_mcc_h').textbox({readonly: true});
                    $('#report_mcc_h').textbox({onlyview: true});
                    $('#report_mcc_m').textbox({readonly: true});
                    $('#report_mcc_m').textbox({onlyview: true});
                }
                $('#report_mcc_h').textbox('setValue', '');
                $('#report_mcc_m').textbox('setValue', '');
            });


            //已报告当地机场相关管理部门
            $('#reported_hab').change(function () {
                var checked = $('#reported_hab').is(':checked');
                if (checked) {
                    $('#report_hab_h').textbox({readonly: false});
                    $('#report_hab_h').textbox({onlyview: false});
                    $('#report_hab_m').textbox({readonly: false});
                    $('#report_hab_m').textbox({onlyview: false});
                } else {
                    $('#report_hab_h').textbox({readonly: true});
                    $('#report_hab_h').textbox({onlyview: true});
                    $('#report_hab_m').textbox({readonly: true});
                    $('#report_hab_m').textbox({onlyview: true});
                }
                $('#report_hab_h').textbox('setValue', '');
                $('#report_hab_m').textbox('setValue', '');
            });
        }
    </script>
</div>
</body>
</html>