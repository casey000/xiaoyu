<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head id="i18n_" module="tm_hrarchive">
    <!--#include virtual="/views/items/resource_.shtml"-->
    <title>MCC交接班维护查询</title>
</head>
<body class="ibody" style="width:100%">
<div id="tt" class="easyui-tabs" style="width:100%; height: 100%">
    <div title="停场不适航项目">
        <form id="faog" method="post">
            <div id="aogDiv">
                <table class="table table-bordered table-info" cellspacing="0" cellpadding="2">
                    <tr>
                        <th style="width: 80px;" align="right">机号：</th>
                        <td class="tdr hs">
                            <input class="easyui-combobox" name="acno" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 100px;" align="right">是否经典案例：</th>
                        <td class="tdr hs">
                            <input class="easyui-combobox" id="ifClassics" name="ifClassics" data-options=""
                                   style="width:120px"/>
                        </td>
                        <td style="width:60%;text-align:left; padding-right:5px">
                            <a class="searchBtn" data-options="iconCls:'icon-search'" onclick="searchData('aog')" auth="PM_MC_HOAOG_QUERY"><span>查询</span></a>
                            <a class="excelBtn" type="button" onclick="excelExport('aog','AOG清单');" auth="PM_MC_HOAOG_EXPORT"><span>导出</span></a>
                        </td>
                    </tr>
                </table>
                <table id="aog"></table>
            </div>
        </form>
    </div>
    <div title="待办任务">
        <form id="ftodo" method="post">
            <div id="todoDiv">
                <table class="table table-bordered table-info" cellspacing="0" cellpadding="2">
                    <tr>
                        <th style="width: 80px;" align="right" nowrap>机号：</th>
                        <td class="tdr hs">
                            <input class="easyui-combobox" name="acno" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 90px;" align="right" nowrap>席位：</th>
                        <td class="tdr hs">
                            <input class="easyui-combogrid" id="seat" name="seat" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right" nowrap>专业：</th>
                        <td class="tdr hs">
                            <input class="easyui-combogrid" id="major" name="major" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 100px;" align="right">是否经典案例：</th>
                        <td class="tdr hs">
                            <input class="easyui-combobox" name="ifClassics" data-options=""
                                   style="width:120px"/>
                        </td>
                        <td style="width:20%;text-align:left; padding-right:5px">
                            <a class="searchBtn" data-options="iconCls:'icon-search'"
                               onclick="searchData('todo')" auth="PM_MC_HOTODO_QUERY"><span>查询</span></a>
                            <a class="excelBtn" type="button"
                               onclick="excelExport('todo','待办任务清单');" auth="PM_MC_HOTODO_EXPORT"><span>导出</span></a>
                        </td>
                    </tr>
                    <tr>
                        <th style="width: 80px;" align="right" nowrap>简述：</th>
                        <td class="tdr hs">
                            <input class="easyui-textbox" name="des" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right" nowrap>DEFECT NO：</th>
                        <td class="tdr hs">
                            <input class="easyui-textbox" name="defectNo" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right" nowrap>TO NO：</th>
                        <td class="tdr hs">
                            <input class="easyui-textbox" name="toNo"  data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 100px;" align="right" nowrap>日志：</th>
                        <td class="tdr hs">
                            <input class="easyui-textbox" name="log" data-options=""
                                   style="width:120px"/>
                        </td>
                    </tr>
                </table>
                <table id="todo"></table>
            </div>
        </form>
    </div>
    <div title="大项工作">
        <form id="fbig" method="post">
            <div id="bigDiv">
                <table class="table table-bordered table-info" cellspacing="0" cellpadding="2">
                    <tr>
                        <th style="width: 80px;" align="right">机型：</th>
                        <td class="tdr hs">
                            <input class="easyui-combobox" id="bigActype" name="actype" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right">机号：</th>
                        <td class="tdr hs">
                            <input class="easyui-combobox" id="bigAcno" name="acno" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right">需求源：</th>
                        <td class="tdr hs">
                            <input class="easyui-combobox" id="bigSource" name="source" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right">状态：</th>
                        <td class="tdr hs">
                            <input class="easyui-combobox" id="bigStatus" name="status" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right" nowrap>工作内容：</th>
                        <td class="tdr hs">
                            <input class="easyui-textbox" name="des" data-options=""
                                   style="width:120px"/>
                        </td>
                        <td colspan="2" style="width:10%;text-align:left; padding-right:5px">
                            <a class="searchBtn" data-options="iconCls:'icon-search'" onclick="searchBigData()"
                               auth="PM_MC_HOBIG_QUERY"><span>查询</span></a>
                            <a class="excelBtn" type="button" onclick="excelExport('big','大项工作清单');" auth="PM_MC_HOBIG_EXPORT"><span>导出</span></a>
                        </td>
                    </tr>
                    <tr>
                        <th style="width: 80px;" align="right"> 开始日期从：</th>
                        <td class="tdr">
                            <input class="easyui-datebox" name="beginDate1" style="width:120px;"
                                   data-options="editable:false"/>
                        </td>
                        <th style="width: 80px;"> 至：</th>
                        <td class="tdr">
                            <input class="easyui-datebox" name="beginDate2" style="width:120px;"
                                   data-options="editable:false"/>
                        </td>
                        <th style="width: 80px;" align="right"> 结束日期从：</th>
                        <td class="tdr">
                            <input class="easyui-datebox" name="endDate1" style="width:120px;"
                                   data-options="editable:false"/>
                        </td>
                        <th style="width: 60px;"> 至：</th>
                        <td class="tdr">
                            <input class="easyui-datebox" name="endDate2" style="width:120px;"
                                   data-options="editable:false"/>
                        </td>
                    </tr>
                </table>
                <table id="big"></table>
            </div>
        </form>
    </div>
    <div title="工具设备">
        <form id="ftool" method="post">
            <div id="toolDiv">
                <table class="table table-bordered table-info" cellspacing="0" cellpadding="2">
                    <tr>
                        <th style="width: 80px;" align="right">工具名称：</th>
                        <td class="tdr hs">
                            <input class="easyui-textbox" name="name" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right">类型：</th>
                        <td class="tdr hs">
                            <input class="easyui-combobox" id="toolType" name="type" data-options=""
                                   style="width:120px"/>
                        </td>
                        <td style="width:60%;text-align:left; padding-right:5px">
                            <a class="searchBtn" data-options="iconCls:'icon-search'"
                               onclick="searchData('tool')" auth="PM_MC_HOTOOL_QUERY"><span>查询</span></a>
                            <a class="excelBtn" type="button"
                               onclick="excelExport('tool','工具设备清单');" auth="PM_MC_HOTOOL_EXPORT"><span>导出</span></a>
                        </td>
                    </tr>
                </table>
                <table id="tool"></table>
            </div>
        </form>
    </div>
    <div title="运行限制">
        <form id="flimit" method="post">
            <div id="limitDiv">
                <table class="table table-bordered table-info" cellspacing="0" cellpadding="2">
                    <tr>
                        <th style="width: 150px;" align="right">机号/航班号/航站：</th>
                        <td class="tdr hs">
                            <input class="easyui-textbox" name="item" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right" nowrap>限制原因：</th>
                        <td class="tdr hs">
                            <input class="easyui-textbox" name="reason" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right" nowrap>限制说明：</th>
                        <td class="tdr hs">
                            <input class="easyui-textbox" name="des" data-options=""
                                   style="width:120px"/>
                        </td>
                        <td style="width: 60px;">&nbsp;</td>
                        <td style="width:40%;text-align:left; padding-right:5px">
                            <a class="searchBtn" data-options="iconCls:'icon-search'"
                               onclick="searchData('limit')" auth="PM_MC_HOLIMIT_QUERY"><span>查询</span></a>
                            <a class="excelBtn" type="button"
                               onclick="excelExport('limit','运行限制清单');" auth="PM_MC_HOLIMIT_EXPORT"><span>导出</span></a>
                        </td>

                    <tr>
                        <th style="width: 150px;" align="right"> 开始日期从：</th>
                        <td class="tdr">
                            <input class="easyui-datebox" id="beginDate1" name="beginDate1" style="width:120px;"
                                   data-options="editable:false"/>
                        </td>
                        <th style="width: 80px;" > 至：</th>
                        <td class="tdr">
                            <input class="easyui-datebox" id="beginDate2" name="beginDate2" style="width:120px;"
                                   data-options="editable:false"/>
                        </td>
                        <th style="width: 80px;" align="right"> 结束日期从：</th>
                        <td class="tdr">
                            <input class="easyui-datebox" id="endDate1" name="endDate1" style="width:120px;"
                                   data-options="editable:false"/>
                        </td>
                        <th style="width: 60px;" > 至：</th>
                        <td class="tdr">
                            <input class="easyui-datebox" id="endDate2" name="endDate2" style="width:120px;"
                                   data-options="editable:false"/>
                        </td>
                    </tr>

                    </tr>
                </table>
                <table id="limit"></table>
            </div>
        </form>
    </div>
    <div title="例行检查单/通知">
        <form id="fnotice" method="post">
            <div id="noticeDiv">
                <table class="table table-bordered table-info" cellspacing="0" cellpadding="2">
                    <tr>
                        <th style="width: 80px;" align="right">类型：</th>
                        <td class="tdr hs">
                            <input class="easyui-combogrid" id="noticeType" name="type" data-options=""
                                   style="width:120px"/>
                        </td>
                        <th style="width: 80px;" align="right">状态：</th>
                        <td class="tdr hs">
                            <input class="easyui-combobox" id="noticeStatus" name="status" data-options=""
                                   style="width:120px"/>
                        </td>
                        <td style="width:60%;text-align:left; padding-right:5px">
                            <a class="searchBtn" data-options="iconCls:'icon-search'"
                               onclick="searchData('notice')" auth="PM_MC_HONOTICE_QUERY"><span>查询</span></a>
                            <a class="addBtn" data-options="iconCls:'icon-add'"
                               onclick="add()" auth="PM_MC_HONOTICE_ADD"><span>增加</span></a>
                            <a class="excelBtn" type="button" onclick="excelExport('notice','检查单通知清单');" auth="PM_MC_HONOTICE_EXPORT"><span>导出</span></a>
                        </td>
                    </tr>
                </table>
                <table id="notice"></table>
            </div>
        </form>
    </div>
</div>
<script type="text/javascript" src="/views/pm/mc/js/datagrid_utils.js"></script>
<script type="text/javascript">
    var param;
    var PAGE_DATA = {};
    var selectRow;
    function i18nCallBack() {
        param = getParentParam_();
        InitFuncCodeRequest_({
            data: {
                FunctionCode: "ANALYSIS_DOMAIN_BYCODE",
                domainCode: "MSGRP,YESORNO_NUMBER,YESORNO,PM_MC_SEAT,PM_MC_BIG_STATUS,PM_MC_TOOL_TYPE,PM_MC_NOTICE_STATUS,PM_MC_NOTICE_TYPE,MCC_TODO_MAJOR,PM_MC_HOTOOL_STATUS,DA_ACREG_MP_ACTYPE,PM_MC_BIG_SOURCE"
            },
            successCallBack: function (jdata) {
                PAGE_DATA['yesorno'] = DomainCodeToMap_(jdata.data.YESORNO_NUMBER);
                PAGE_DATA['noticeType'] = DomainCodeToMap_(jdata.data.PM_MC_NOTICE_TYPE);
                PAGE_DATA['seat'] = DomainCodeToMap_(jdata.data.PM_MC_SEAT);
                PAGE_DATA['bigStatus'] = DomainCodeToMap_(jdata.data.PM_MC_BIG_STATUS);
                PAGE_DATA['toolType'] = DomainCodeToMap_(jdata.data.PM_MC_TOOL_TYPE);
                PAGE_DATA['noticeStatus'] = DomainCodeToMap_(jdata.data.PM_MC_NOTICE_STATUS);
                PAGE_DATA['major'] = DomainCodeToMap_(jdata.data.MCC_TODO_MAJOR);
                PAGE_DATA['toolStatus'] = DomainCodeToMap_(jdata.data.PM_MC_HOTOOL_STATUS);
                //航站
                $("#station").MyComboGrid({
                    idField: 'STATION',  //实际选择值
                    textField: 'STATION', //文本显示值
                    panelHeight: '180px',
                    width: 140,
                    params: {FunctionCode: 'SELECT_STATION'},
                    columns: [[
                        {field: 'STATION', title: '航站三字码', width: 50},
                        {field: 'STATION_FCODE', title: '航站四字码', width: 50},
                        {field: 'SHORT_NAME', title: '中文简称', width: 50},
                        {field: 'FULLNAME_CN', title: '中文全称', width: 50},
                    ]],
                    onHidePanel: function () {
                        var t = $(this).combogrid('getValue');
                        if (t != null && t != '' & t != undefined) {
                            if (selectRow == null || t != selectRow.STATION) {//没有选择或者选项不相等时清除内容
                                alert('请选择，不要直接输入！');
                                $(this).combogrid({value: ''});
                            }
                        }
                    },
                    onSelect: function (index, row) {
                        selectRow = row;
                    }
                });
                //机号
                $("#bigAcno").combobox({
                    panelHeight: '160px',
                    multiple: true, //是否可多选
                    valueField: 'VALUE',
                    textField: 'TEXT',
                    data: jdata.data.MSGRP
                });
                //是否经典案例
                $("input[textboxname='ifClassics']").combobox({
                    panelHeight: '160px',
                    valueField: 'VALUE',
                    textField: 'TEXT',
                    data: jdata.data.YESORNO_NUMBER
                });
                //席位
                $("#seat").combobox({
                    panelHeight: '160px',
                    valueField: 'VALUE',
                    textField: 'TEXT',
                    data: jdata.data.PM_MC_SEAT
                });
                //专业
                $('#major').combobox({
                    panelHeight: '160px',
                    valueField: 'VALUE',
                    textField: 'TEXT',
                    data: jdata.data.MCC_TODO_MAJOR
                });
                //大项工作状态
                $("#bigStatus").combobox({
                    panelHeight: '160px',
                    valueField: 'VALUE',
                    textField: 'TEXT',
                    data: jdata.data.PM_MC_BIG_STATUS
                });
                //大项工作机型
                $("#bigActype").combobox({
                    panelHeight: '160px',
                    valueField: 'VALUE',
                    textField: 'TEXT',
                    data: jdata.data.DA_ACREG_MP_ACTYPE
                });
                //需求源
                $('#bigSource').combobox({
                    panelHeight: '160px',
                    valueField: 'VALUE',
                    textField: 'TEXT',
                    data: jdata.data.PM_MC_BIG_SOURCE
                });
                //工具类型
                $("#toolType").combobox({
                    panelHeight: '160px',
                    valueField: 'VALUE',
                    textField: 'TEXT',
                    data: jdata.data.PM_MC_TOOL_TYPE
                });
                //通知状态
                $("#noticeStatus").combobox({
                    panelHeight: '160px',
                    valueField: 'VALUE',
                    textField: 'TEXT',
                    data: jdata.data.PM_MC_NOTICE_STATUS
                });
                //通知类别
                $("#noticeType").combobox({
                    panelHeight: '160px',
                    valueField: 'VALUE',
                    textField: 'TEXT',
                    data: jdata.data.PM_MC_NOTICE_TYPE
                });
                InitDataGridAog();
                InitDataGridTodo();
                InitDataGridBig();
                InitDataGridTool();
                InitDataGridLimit();
                InitDataGridNotice();
            }
        });
    }
    function InitDataGridAog() {
        $("#aog").MyDataGrid({
            identity: 'aog',
            columns: {
                param: {FunctionCode: 'PM_MC_HOAOG_WH_LIST'},
                alter: {
                    BEGIN_DATE: {
                        type: 'date'
                    },
                    RELIEVE_DATE: {
                        type: 'date'
                    },
                    GOON_DATE: {
                        type: 'date'
                    },
                    IF_RELIEVE: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['yesorno'][value];
                        }
                    },
                    IF_GOON: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['yesorno'][value];
                        }
                    },
                    IF_CLASSICS: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['yesorno'][value];
                        }
                    },
                    INPUTER_DATE: {
                        type: 'date'
                    },
                    MODIFY_DATE: {
                        type: 'date'
                    }
                }
            },
            validAuth: function (row, items) {
                if (row.IF_CLASSICS == 1) {
                    items["标记经典案例"].enable = false;
                }
                return items;
            },
            contextMenus: [
                {
                    id: "m-view", i18nText: "浏览",auth:"PM_MC_HOAOG_VIEW",
                    onclick: function () {
                        var rowData = $("#aog").datagrid('getSelected');
                        common_add_edit_({
                            identity: 'aog', isEdit: 1, width: 1250, height: 760,
                            param: {hoPkid: rowData.PKID},
                            url: "/views/pm/mc/handover/mcc_ho_edit_aog_view.shtml"
                        })
                    }
                },
                {
                    id: "m-view", i18nText: "打印",auth:"PM_MC_HOAOG_PRINT",
                    onclick: function () {
                        var rowData = getDG('aog').datagrid('getSelected');
                        if (!rowData.PKID) {
                            MsgAlert({content: "请选择数据！", type: 'error'});
                            return;
                        }

                        ajaxLoading();
                        doPost(Constant.API_URL + 'PM_MCC_HOAOG_PRINT', {pkid: rowData.PKID});
                        ajaxLoadEnd()
                    }
                },
                {
                    id: "m-edit", i18nText: "标记经典案例",auth:"PM_MC_HOAOG_CLASSICS",
                    onclick: function () {
                        var rowData = $("#aog").datagrid('getSelected');
                        if (confirm("确认标记经典案例吗？")) {
                            InitFuncCodeRequest_({
                                data: {pkid: rowData.PKID, FunctionCode: "PM_MC_HOAOG_SIGN_IF_CLASSICS"},
                                successCallBack: function (jdata) {
                                    if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                                        searchData('aog');
                                    }
                                }
                            });
                        }
                    }
                },
                /*{
                    id: "m-edit", i18nText: "浏览明细",
                    onclick: function () {
                        var rowData = $("#aog").datagrid('getSelected');
                        common_add_edit_({
                            identity: 'aog', isEdit: 1, width: 850, height: 600,
                            param: {refPkid: rowData.PKID2, flag: 'view'},
                            url: "/views/pm/mc/handover/mcc_ho_edit_aog_detail_list.shtml"
                        })
                    }
                 }*/
                /*{
                    id: "m-edit", i18nText: "编辑",
                    onclick: function () {
                        common_add_edit_({
                            identity: 'aog', isEdit: 1, width: 650, height: 400,
                            url: "/views/pm/mc/handover/mcc_ho_edit_aog.shtml"
                        })
                    }
                },
                {
                    id: "m-delete", i18nText: "删除",
                    onclick: function () {
                        var rowData = $("#aog").datagrid('getSelected');
                        common_delete_({
                            identity: 'aog',
                            cfmI18next: "确认删除吗",
                            param: {data: {pkid: rowData.PKID}},
                            FunctionCode: "PM_MC_HOAOG_DEL"
                        })
                    }
                 }*/
            ],
            resize: function () {
                return tabs_standard_resize($('#tt'), 25)
            }
        });
    }
    function InitDataGridTodo() {
        $("#todo").MyDataGrid({
            identity: 'todo',
            columns: {
                param: {FunctionCode: 'PM_MC_HOTODO_WH_LIST'},
                alter: {
                    BEGIN_DATE: {
                        type: 'date'
                    },
                    TYPE: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['seat'][value];
                        }
                    },
                    IF_CLASSICS: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['yesorno'][value];
                        }
                    },
                    MAJOR: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['major'][value];
                        }
                    },
                    LSRZ: {
                        formatter: function (value, row, index) {
                            return "<a href='###' class='ridoBtn'   onclick=\"history('" + row.PKID2 + "');\">history<a/>";
                        }
                    },
                }
            },
            validAuth: function (row, items) {
                if (row.IF_CLASSICS == 1) {
                    items["标记经典案例"].enable = false;
                }
                return items;
            },
            contextMenus: [
                {
                    id: "m-edit", i18nText: "标记经典案例",auth:"PM_MC_HOTODO_CLASSICS",
                    onclick: function () {
                        var rowData = $("#todo").datagrid('getSelected');
                        if (confirm("确认标记经典案例吗？")) {
                            InitFuncCodeRequest_({
                                data: {pkid: rowData.PKID, FunctionCode: "PM_MC_HOTODO_SIGN_IF_CLASSICS"},
                                successCallBack: function (jdata) {
                                    if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                                        searchData('todo');
                                    }
                                }
                            });
                        }
                    }
                },
            ],
            resize: function () {
                return tabs_standard_resize($('#tt'), 60)
            }
        });
    }
    function InitDataGridBig() {
        $("#big").MyDataGrid({
            identity: 'big',
            columns: {
                param: {FunctionCode: 'PM_MC_HOBIG_WH_LIST'},
                alter: {
                    BEGIN_DATE: {
                        type: 'date'
                    },
                    END_DATE: {
                        type: 'date'
                    },
                    STATUS: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['bigStatus'][value];
                        }
                    },
                    INPUTER_DATE: {
                        type: 'date'
                    },
                    MODIFY_DATE: {
                        type: 'date'
                    }
                }
            },
            resize: function () {
                return tabs_standard_resize($('#tt'), 60)
            }
        });
    }
    function searchBigData() {
        var queryParams = $('#fbig').serializeObject();
        //机号多选
        var acno = $("#bigAcno").combobox('getText');
        queryParams.acno = acno;
        $('#big').datagrid('load', queryParams);
    }
    function InitDataGridTool() {
        $("#tool").MyDataGrid({
            identity: 'tool',
            columns: {
                param: {FunctionCode: 'PM_MC_HOTOOL_WH_LIST'},
                alter: {
                    DELIVERY_DATE: {
                        type: 'date'
                    },
                    RETURN_DATE: {
                        type: 'date'
                    },
                    TYPE: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['toolType'][value];
                        }
                    },
                    TOOL_STATUS: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['toolStatus'][value];
                        }
                    },
                    INPUTER_DATE: {
                        type: 'date'
                    },
                    MODIFY_DATE: {
                        type: 'date'
                    }
                }
            },
            resize: function () {
                return tabs_standard_resize($('#tt'), 25)
            }
        });
    }
    function InitDataGridLimit() {
        $("#limit").MyDataGrid({
            identity: 'limit',
            columns: {
                param: {FunctionCode: 'PM_MC_HOLIMIT_WH_LIST'},
                alter: {
                    BEGIN_DATE: {
                        type: 'date'
                    },
                    END_DATE: {
                        type: 'date'
                    },
                    INPUTER_DATE: {
                        type: 'date'
                    },
                    MODIFY_DATE: {
                        type: 'date'
                    }
                }
            },
            resize: function () {
                return tabs_standard_resize($('#tt'), 60)
            }
        });
    }
    function InitDataGridNotice() {
        $("#notice").MyDataGrid({
            identity: 'notice',
            columns: {
                param: {FunctionCode: 'PM_MC_HONOTICE_WH_LIST'},
                alter: {
                    TYPE: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['noticeType'][value];
                        }
                    },
                    STATUS: {
                        formatter: function (value, row, index) {
                            return PAGE_DATA['noticeStatus'][value];
                        }
                    },
                }
            },
            contextMenus: [
                {
                    id: "m-edit", i18nText: "编辑",auth:"PM_MC_HONOTICE_EDIT",
                    onclick: function () {
                        common_add_edit_({
                            identity: 'notice', isEdit: 1, width: 650, height: 400,
                            url: "/views/pm/mc/handover/mcc_ho_edit_notice.shtml"
                        })
                    }
                },
                {
                    id: "m-delete", i18nText: "删除",auth:"PM_MC_HONOTICE_DEL",
                    onclick: function () {
                        var rowData = $("#notice").datagrid('getSelected');
                        common_delete_({
                            identity: 'notice',
                            cfmI18next: "确认删除吗",
                            param: {data: {pkid: rowData.PKID}},
                            FunctionCode: "PM_MC_HONOTICERULE_DEL"
                        })
                    }
                }
            ],
            resize: function () {
                return tabs_standard_resize($('#tt'), 25)
            }
        });
    }
    //历史日志history
    function history(pkid2) {
        common_add_edit_({
            identity: 'todo', isEdit: 0, width: 650, height: 400,
            param: {pkid2: pkid2},
            url: "/views/pm/mc/handover/mcc_ho_todo_history.shtml"
        });
    }
    //查询
    function searchData(id) {
        onSearch_(id, '#f' + id);
    }
    function add() {
        common_add_edit_({
            identity: 'notice', isEdit: 0, width: 650, height: 400,
            url: "/views/pm/mc/handover/mcc_ho_edit_notice.shtml"
        });
    }
</script>
</body>
</html>