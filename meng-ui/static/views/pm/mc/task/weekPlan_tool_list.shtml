<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head id="i18n_" module="tm_hrarchive">
    <!--#include virtual="/views/items/resource_.shtml"-->
    <title>任务操作日志</title>
</head>
<body class="ibody">
<table id="dg"></table>
<script type="text/javascript" src="/views/pm/mc/js/datagrid_utils.js"></script>
<script type="text/javascript">
    var param;
    var identity = 'dg';
    var PAGE_DATA = {};
    var selectRow;
    var cardNumber = '';
    function i18nCallBack() {
        param = getParentParam_();
        if (param.cardNumber) {
            cardNumber = param.cardNumber;
        }
        InitFuncCodeRequest_({
            data: {FunctionCode: "ANALYSIS_DOMAIN_BYCODE", domainCode: "YESORNO"},
            successCallBack: function (jdata) {
                PAGE_DATA['qtyReq'] = DomainCodeToMap_(jdata.data.YESORNO);
                InitDataGrid();
            }
        });
    }
    function InitDataGrid() {
        $("#dg").MyDataGrid({
            identity: identity,
            queryParams: {cardNumber: cardNumber},
            columns: {
                param: {FunctionCode: 'PM_MC_TASK_TOOL_LIST'},
                alter: {
                    QTY_REQ: {
                        formatter: function (value, rowData, index) {
                            return PAGE_DATA['qtyReq'][value];
                        }
                    }
                }
            }
        });
    }

    /** 刷新列表数据 */
    function reload_() {
        $("#dg").datagrid("reload");
    }

</script>
</body>
</html>