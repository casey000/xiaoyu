<!DOCTYPE html>
<html>
<!-- Mirrored , Wed, 20 Jan 2016 14:19:52 GMT -->
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="renderer" content="webkit">
    <meta http-equiv="Cache-Control" content="no-siteapp"/>
    <!--#include virtual="/views/items/resource_.shtml" -->
    <link rel="stylesheet" href="/css/main.css">
    <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"/>
    <meta http-equiv="pragma" content="no-cache"/>
    <meta http-equiv="cache-control" content="no-cache"/>
    <meta http-equiv="expires" content="0"/>

    <link href="/css/style.min862f.css?v=4.1.0" rel="stylesheet"/>
    <link rel="stylesheet" type="text/css" href="/css/common.css"/>
    <link rel="stylesheet" type="text/css" href="/css/icon.css"/>
    <link rel="stylesheet" type="text/css" href="/css/plugins/easyui/themes/bootstrap/easyui.css" id="swicth-style"/>
    <link rel="stylesheet" type="text/css" href="/css/plugins/easyui/themes/icon.css"/>
    <link rel="stylesheet" type="text/css" href="/css/plugins/easyui/themes/color.css"/>
    <!--<script type="text/javascript" src="/js/jquery-3.1.0.min.js"></script>-->
    <script type="text/javascript" src="/js/jquery-1.12.0.min.js"></script>
    <script type="text/javascript" src="/js/constants.js"></script>
    <!--<script type="text/javascript" src="/js/plugins/Validform_v5.3.2/Validform_v5.3.2.js"></script>
    <link rel="stylesheet" type="text/css" href="/js/plugins/Validform_v5.3.2/css/style.css">-->

    <script type="text/javascript" src="/js/plugins/easyui/jquery.easyui.custom.min.js"></script>
    <script type="text/javascript" src="/js/plugins/easyui/locale/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="/js/plugins/cookie/jquery.cookie.js"></script>
    <script type="text/javascript" src="/js/base64.js"></script>
    <script type="text/javascript" src="/js/plugins/layer/layer.js?style=default"></script>
    <script src="/js/plugins/i18next/i18next.min.js"></script>
    <script type="text/javascript" src="/js/common.js"></script>
    <script type="text/javascript" src="/js/combobox_utils.js"></script>
    <script type="text/javascript" src="/js/plugins/laytpl/laytpl.js"></script>
    <script src="/js/pdf.worker.js" type="text/javascript"></script>
    <script type="text/javascript" src="/js/axios.min.js"></script>
    <script type="text/javascript" src="/js/sfa-query-1.0.js"></script>
    <script type="text/javascript" src="/js/env.js"></script>

    <!--add by doreen for 3D-->
    <script type="text/javascript" src="/js/qwebchannel.js"></script>
    <script type="text/javascript" src="/js/qt.chrome.js"></script>
    <script type="text/javascript" src="/js/bridgeBusiness.js"></script>
    <script type="text/javascript" src="/js/base64.js"></script>
    <script type="text/javascript" src="/js/ASMS3DObject.js"></script>
    <script type="text/javascript" src="/js/sta-parser.js"></script>
    <script type="text/javascript" src="/js/common/echarts.min.js"></script>


    <title>欢迎来到TDMS</title>
</head>

<body class="ibody">
<div class="oulDiv">
    <!--<ul class="oul">
        <li>
            <img src="/img/one.png" alt="">
            <p>待办任务</p>
        </li>
        <li>
            <img src="/img/two.png" alt="">
            <p>消息提醒</p>
        </li>
        <li>
            <img src="/img/three.png" alt="">
            <p>预警</p>
        </li>
        <li>
            <img src="/img/four.png" alt="">
            <p>航班动态</p>
        </li>
    </ul>-->
    <ul class="oul">
        <li onclick="_reload(0)">
            <div><img src="/img/todo.png" alt=""></div>
            <p>待办工作流<span id="db"></span></p>
        </li>
        <li onclick="_reload(1)">
            <div><img src="/img/approval.png" alt=""></div>
            <p>待签工作流<span id="dq"></span></p>
        </li>
        <!-- <li onclick="_reload(2)">
             <div><img src="/img/three.png" alt=""><span id="require"></span></div>
             <p>缺件申请</p>
         </li>
         <li onclick="_reload(3)">
             <div><img src="/img/three.png" alt=""><span id="pnApply"></span></div>
             <p>新件号申请</p>
         </li>-->
        <li onclick="_reload(4)">
            <div><img src="/img/alert.png" alt=""><span id="yj"></span></div>
            <p>预警消息</p>
        </li>
        <li onclick="_reload(5)">
            <img src="/img/notice.png" alt="">
            <p>公告信息</p>
        </li>
        <li onclick="_reload(6)">
            <div><img src="/img/monitor.png" alt=""></div>
            <p>SAP接口监控<span id="monitor"></span></p>
        </li>
        <!--<li onclick="_reload(6)">
            <img src="/img/five.png" alt="">
            <div>
                <a href="http://172.31.240.93:8000/airnavx" target="_blank">内网地址</a>
                &nbsp;&nbsp;
                <a href="http://tp3.sichuanair.com:8000/airnavx" target="_blank">外网地址</a>
            </div>
        </li>-->
    </ul>
</div>
<!--<div class="odiv">
    <div class="botDiv">
        <div id="tabs" class="easyui-tabs" style="width: 100%; height: 100%;">
            <div id="tab01" title="待办任务" style="display: none; padding: 2px; overflow: hidden;">
                <table id="list1"></table>
            </div>
        </div>
    </div>
    <div class="botDiv">
        <table id="dg"></table>
    </div>
    <div class="botDiv">
        <table id="dg1"></table>
    </div>
</div>-->
<div id="mlayout" class="easyui-layout" style="height: 72%;">
    <div id="lay_left" data-options="region:'west',split:false" style="width: 50%;">
        <table id="list1"></table>
    </div>
    <div id="lay_right" data-options="region:'center'" style="width: 50%;">
        <div>
            <table id="todo"></table>
        </div>
    </div>
</div>

</body>
</html>
<script type="text/javascript" src="/js/datagrid_utils.js"></script>
<script type="text/javascript">
    /*$('.oulDiv ul li').each(function () {
        var index = $(this).index();
        $('.botDiv').eq(0).show().siblings().hide();
        $(this).click(function () {
            reload_();
            $('.botDiv').eq(index).show().siblings().hide();
        })
     });*/


    var loginUserId = getLoginInfo().accountId;
    var userId = getLoginInfo().accountNumber;
    var PAGE_DATA = {};

    function i18nCallBack() {

        InitFuncCodeRequest_({
            async: false,
            data: {
                domainCode: "WS_FROM_UID,WS_TO_UID,MSG_STATUS",
                FunctionCode: "ANALYSIS_DOMAIN_BYCODE"
            },
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    PAGE_DATA['state'] = DomainCodeToMap_(jdata.data["MSG_STATUS"]);
                    $('#fromUid').combobox({
                        panelHeight: '150px',
                        valueField: 'VALUE',
                        textField: 'TEXT',
                        data: jdata.data.WS_FROM_UID,
                    });
                    $('#toUid').combobox({
                        panelHeight: '150px',
                        valueField: 'VALUE',
                        textField: 'TEXT',
                        data: jdata.data.WS_FROM_UID,
                    });
                } else {
                    MsgAlert({content: jdata.msg, type: 'error'});
                }
            }
        });

        InitDataGridMsg();
        InitDataGridTask();
        InitDataGridYj();
        InitDataGridTodo();
        InitDataGridSap();
        checkUserAndMenu();
        InitDataGridNum();
        InitDataGridNum2();
        reflushNum();
    }

    function reflushNum() {
        setInterval(function () {
            InitDataGridNum()
        }, 120000);
    }

    function checkUserAndMenu() {
        //console.log("userId"+loginUserId);
        InitFuncCodeRequest_({
            data: {FunctionCode: "Y_WS_CHECK", userId: loginUserId},
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    if (jdata.data[0].COUNT1 == 0) {
                        $(".oul li").eq(2).hide();
                    }
                    if (jdata.data[1].COUNT1 == 0) {
                        $(".oul li").eq(3).hide();
                    }
                }
            }
        });
    }

    /*$('.oulDiv ul li').each(function(){
     var index = $(this).index();
     $(this).click(function () {
     _reload(index);
     $('.botDiv').eq(index).show().siblings().hide();
     if (index < 2) {
     taskType = index;
     }
     })
     });*/

    //  查询待办、预警数量
    function InitDataGridNum() {
        InitFuncCodeRequest_({
            /*data: { FunctionCode: "Y_WS_AFFICHE_COUNT",loginUserId: loginUserId,zsqr:userId},*/
            data: {FunctionCode: "PROCESS_REMAIN_TASK_LIST"},
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    document.getElementById("db").innerHTML = jdata.total;
                    /*document.getElementById("yj").innerHTML = jdata.data.YJ;
                     document.getElementById("require").innerHTML = jdata.data.REQUIRE;
                     document.getElementById("pnApply").innerHTML = jdata.data.PART;*/
                } else {
                    MsgAlert({content: jdata.msg, type: 'error'});
                }
            }
        });
    }
    //查询SAP接口监控异常数量
    function InitDataGridSap(){
        InitFuncCodeRequest_({
            data: {FunctionCode: "WS_SAP_INTERFACE_MONITOR_NUM", userId: loginUserId},
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    document.getElementById("monitor").innerHTML =jdata.data[0].NUM;
                } else {
                    MsgAlert({content: jdata.msg, type: 'error'});
                }
            }
        });
    }

    //  查询待签数量
    function InitDataGridNum2() {
        InitFuncCodeRequest_({
            /*data: { FunctionCode: "PROCESS_CLAIM_TASK_PRO_LIST",userId: loginUserId},*/
            data: {FunctionCode: "PROCESS_CLAIM_TASK_LIST", userId: loginUserId},
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    document.getElementById("dq").innerHTML = jdata.total;
                } else {
                    MsgAlert({content: jdata.msg, type: 'error'});
                }
            }
        });
    }

    /**我的待办工作流*/
    function InitDataGridTask() {
        var identity = 'list1';
        $("#list1").MyDataGrid({
            identity: identity,
            columns: {
                param: {FunctionCode: 'PROCESS_REMAIN_TASK_LIST'}
            },
            validAuth: function (row, items) {
                return items;
            },
            toolbar: [
                {
                    key: "", text: $.i18n.t('待办工作流'), auth: ""
                }
            ],
            rowStyler: function (index, row) {
                var days = row.REMAIN_DAY;
                if (days <= 0) {
                    return 'font-weight:bold;background-color:#FF0000;';//红色
                } else if (days > 0 && days < 5) {
                    return 'font-weight:bold;background-color:#FFFF00;';//橙黄FFA500
                }
            },
            contextMenus: [
                {
                    i18nText: "处理任务", auth: "",
                    onclick: function () {
                        //flowDefId : FLOW_DEF_ID  taskId: rowData.TASK_ID
                        var rowData = getDG(identity).datagrid('getSelected');
                        window.parent.COMMONFUNLIST.setTaskInfo(rowData);
                        if (!rowData) {
                            MsgAlert({PWindow: window, content: $.i18n.t('msg_err:ERRMSG.NO_SELECT_ROW_ERROR')});
                            return;
                        }
                        InitFuncCodeRequest_({
                            data: {
                                FunctionCode: "PROCESS_GET_FORM",
                                taskId: rowData.TASK_ID,
                                flowDefId: rowData.FLOW_DEF_ID
                            },
                            successCallBack: function (jdata) {
                                var form = jdata.data.form;
                                common_page_({
                                    identity: identity,
                                    width: form.width || 800, height: form.height || 380,
                                    param: {
                                        TASK_ID: rowData.TASK_ID, FLOW_DEF_ID: rowData.FLOW_DEF_ID,
                                        PROC_DEF_ID: rowData.PROC_DEF_ID, PROC_INST_ID: rowData.PROC_INST_ID
                                    },
                                    title: "流程任务处理",
                                    url: form.formUrl
                                });
                            }
                        });
                    }
                },
                {
                    i18nText: "转办", auth: "",
                    onclick: function () {
                        //flowDefId : FLOW_DEF_ID  taskId: rowData.TASK_ID
                        var rowData = getDG(identity).datagrid('getSelected');
                        if (!rowData) {
                            MsgAlert({PWindow: window, content: $.i18n.t('msg_err:ERRMSG.NO_SELECT_ROW_ERROR')});
                            return;
                        }
                        common_add_edit_({
                            url: "/views/flow/work_flow_turn_to_account_select.shtml",
                            param: {
                                taskId: rowData.TASK_ID,
                                taskName: rowData.TASK_NAME,
                                successCallback: function (data) {
                                    reload_();
                                }
                            },
                            title: $.i18n.t("选择代办人"),
                            width: 520,
                            height: 300
                        });
                    }
                },
                {
                    i18nText: "查看流程图", auth: "",
                    onclick: function () {
                        var rowData = getDG(identity).datagrid('getSelected');
                        common_page_({
                            identity: identity, checkRowData: true, width: '90%', height: '90%',
                            param: {
                                PROC_DEF_ID: rowData.PROC_DEF_ID,
                                PROC_INST_ID: rowData.PROC_INST_ID,
                                BUSINESS_KEY: rowData.BUSINESS_KEY
                            },
                            title: "查看流程图",
                            url: "/views/ws/work_flow/flow_definition/flow_diagram_view.shtml"
                        });
                    }
                }
            ],
            onLoadSuccess: function () {
                setTimeout('setCount()', 500);
            },
            resize: function () {
                return tabs_standard_resize($("#mlayout"), -40, 0.51, 0);
            }
        });
    }

    /**我的待办任务*/
    function InitDataGridTodo() {
        var identity = 'todo';
        $("#todo").MyDataGrid({
            identity: identity,
            queryParams: {assignee: loginUserId},
            rowStyler: function (index, row) {
                var state = row.STATE;
                var days = row.REMAIN_DAY;
                if (state == 'U') {
                    if (days <= 0) {
                        return 'font-weight:bold;background-color:#FF0000;';//红色
                    } else if (days > 0 && days <= 5) {
                        return 'font-weight:bold;background-color:#FFFF00;';//橙黄FFA500
                    }
                }
            },
            columns: {
                param: {FunctionCode: 'PROCESS_REMAIN_TODO_LIST'},
                alter: {
                    STATE: {
                        formatter: function (value) {
                            return PAGE_DATA['state'][value];
                        }
                    },
                    MSG_TITLE: {
                        formatter: function (value, row, index) {
                            if (row.MSG_TYPE == 1) {
                                return '<a href="javascript:void(0);" onclick="shwowDetail(\'' + index + '\')">' + value + '</a>';
                            } else {
                                return value;
                            }
                            /*if (row.MSG_TYPE == 2) {
                                return '<a href="javascript:void(0);" onclick="shwowDetailType2(\'' + index + '\')">' + value + '</a>';
                            }
                            if (row.MSG_TYPE == 3) {
                                return '<a href="javascript:void(0);" onclick="shwowDetailType3(\'' + index + '\')">' + value + '</a>';
                            }*/
                        },
                    },
                }
            },
            validAuth: function (row, items) {
                return items;
            },
            toolbar: [
                {
                    key: "", text: $.i18n.t('待办任务'), auth: ""
                }
            ],
            contextMenus: [
                {
                    i18nText: "处理任务", auth: "",
                    onclick: function () {
                        var rowData = getDG(identity).datagrid('getSelected');
                        if (!rowData) {
                            MsgAlert({PWindow: window, content: $.i18n.t('msg_err:ERRMSG.NO_SELECT_ROW_ERROR')});
                            return;
                        }
                        openDetai(rowData);
                    }
                },  {
                    i18nText: "转发", auth: "",
                    onclick: function () {
                        var rowData = getDG(identity).datagrid('getSelected');
                        if (!rowData) {
                            MsgAlert({PWindow: window, content: $.i18n.t('msg_err:ERRMSG.NO_SELECT_ROW_ERROR')});
                            return;
                        }
                        transMsg(rowData);
                    }
                }
                ],

            validAuth: function (row, items) {
                if (row.MSG_TYPE == "1") {
                    items['处理任务'].enable = false;
                }
                if (row.STATE != "U") {
                    items['处理任务'].enable = false;
                }
                return items;
            },
            onLoadSuccess: function () {
                setTimeout('setCount()', 500);
            },
            resize: function () {
                return tabs_standard_resize($("#mlayout"), -40, 0.51, 0);
            }
        });
    }
    //tab 标题数量setCount
    function setCount() {
        var total;
        total = $("#list1").datagrid('getPager').pagination('options').total;

    }

    /**消息提醒*/
    function InitDataGridMsg() {
        var identity = 'dg';
        $("#dg").MyDataGrid({
            identity: identity,
            rowStyler: function (index, row) {
                if (row.STATE == 'U') {
                    return 'font-weight:bold;';
                }
            },//loginUserId
            queryParams: {loginUserId: loginUserId},
            columns: {
                param: {FunctionCode: 'WS_SYS_UMESSAGE_LIST'},
                alter: {
                    MSG_BODY: {
                        formatter: function (value, row, index) {
                            if (row.MSG_TYPE == 1) {
                                return '<a href="javascript:void(0);" onclick="shwowDetail(\'' + index + '\')">' + value + '</a>';
                            }
                            if (row.MSG_TYPE == 2) {
                                return '<a href="javascript:void(0);" onclick="shwowDetailType2(\'' + index + '\')">' + value + '</a>';
                            }
                            if (row.MSG_TYPE == 3) {
                                return '<a href="javascript:void(0);" onclick="shwowDetailType3(\'' + index + '\')">' + value + '</a>';
                            }
                        },
                    },

                    STATE: {
                        formatter: function (value, row, index) {
                            switch (value) {
                                case 'R':
                                    return '已读';
                                case 'U':
                                    return "未读";

                            }
                        }
                    },
                    MSG_TYPE: {
                        formatter: function (value, row, index) {
                            switch (value) {
                                case '1':
                                    return '文本消息';
                                case '2':
                                    return "打开系统连接";
                                case '3':
                                    return "弹出新窗口";
                                default:
                                    return value;

                            }
                        }
                    },
                    TO_UID: {
                        formatter: function (value, row, index) {
                            switch (value) {
                                case '0':
                                    return '所有人';
                                default:
                                    return value;

                            }
                        }
                    },
                    FROM_UID: {
                        formatter: function (value, row, index) {
                            switch (value) {
                                case '0':
                                    return '所有人';
                                default:
                                    return value;

                            }
                        }
                    },
                }

            },
            contextMenus: [
            ],
            resize: function () {
                return tabs_standard_resize($('#tabs'), -12)
            }
        });
    }

    /**预警*/
    function InitDataGridYj() {
        var identity = 'dg1';
        $("#dg1").MyDataGrid({
            identity: identity,
            rowStyler: function (index, row) {
                if (row.STATE == 'U') {
                    return 'font-weight:bold;';
                }
            },
            queryParams: {loginUserId: loginUserId, state: 'U'},
            columns: {
                param: {FunctionCode: 'WS_SYS_YJ_LIST'},
                alter: {
                    MSG_BODY: {
                        formatter: function (value, row, index) {
                            if (row.MSG_TYPE == 1) {
                                return '<a href="javascript:void(0);" onclick="shwowDetailYj(\'' + index + '\')">' + value + '</a>';
                            }
                            if (row.MSG_TYPE == 2) {
                                return '<a href="javascript:void(0);" onclick="shwowDetailTypeYj2(\'' + index + '\')">' + value + '</a>';
                            }
                            if (row.MSG_TYPE == 3) {
                                return '<a href="javascript:void(0);" onclick="shwowDetailTypeYj3(\'' + index + '\')">' + value + '</a>';
                            }
                        },
                    },

                    STATE: {
                        formatter: function (value, row, index) {
                            switch (value) {
                                case 'R':
                                    return '已读';
                                case 'U':
                                    return "未读";

                            }
                        }
                    },
                    MSG_TYPE: {
                        formatter: function (value, row, index) {
                            switch (value) {
                                case '1':
                                    return '文本消息';
                                case '2':
                                    return "打开系统连接";
                                case '3':
                                    return "弹出新窗口";
                                default:
                                    return value;

                            }
                        }
                    },
                    TO_UID: {
                        formatter: function (value, row, index) {
                            switch (value) {
                                case '0':
                                    return '所有人';
                                default:
                                    return value;

                            }
                        }
                    },
                    FROM_UID: {
                        formatter: function (value, row, index) {
                            switch (value) {
                                case '0':
                                    return '所有人';
                                default:
                                    return value;

                            }
                        }
                    },
                }

            },
            resize: function () {
                return tabs_standard_resize($('#tabs'), -12)
            }
        });
    }

    /**消息提醒——已读*/
    function setHaveRead(pkid) {
        InitFuncCodeRequest_({
            url: Constant.API_V1_URL + "message/updStatus",
            data: {pkid: pkid, state: 'R'},
            successCallBack: function (jdata) {
            }
        });
    }

    /**消息提醒——点击查看详细信息*/
    function shwowDetail(index) {
        var rowDataS = $("#todo").datagrid('getData');
        setHaveRead(rowDataS.rows[index].PKID);
        setTimeout("reload_()", 100);
        ShowWindowIframe({
            width: 748,
            height: 400,
            title: '详细信息',
            param: {rowData: rowDataS.rows[index]},
            url: '/views/ws/message/ws_message_edit_add.shtml'
        })
    }

    /**消息提醒——点击查看详细信息*/
    function shwowDetailType2(index) {
        var rowDataS = $("#dg").datagrid('getData');
        setHaveRead(rowDataS.rows[index].PKID);
        setTimeout("reload_()", 100);
        window.top.createOrSelectTab_(rowDataS.rows[index].MSG_BODY, '0', rowDataS.rows[index].MSG_TITLE, true, true);

    }

    /**消息提醒——点击查看详细信息*/
    function shwowDetailType3(index) {
        var rowDataS = $("#dg").datagrid('getData');
        setHaveRead(rowDataS.rows[index].PKID);
        setTimeout("reload_()", 100);
        ShowWindowIframe({
            width: 748,
            height: 400,
            title: '详细信息',
            param: {rowData: rowDataS.rows[index]},
            url: rowDataS.rows[index].MSG_BODY
        })

    }

    /**消息提醒——点击查看详细信息*/
    function shwowDetailYj(index) {
        var rowDataS = $("#dg1").datagrid('getData');
        setHaveRead(rowDataS.rows[index].PKID);
        setTimeout("reload_()", 100);
        ShowWindowIframe({
            width: 748,
            height: 400,
            title: '详细信息',
            param: {rowData: rowDataS.rows[index]},
            url: '/views/ws/message/ws_message_edit_add.shtml'
        })
    }

    /**消息提醒——点击查看详细信息*/
    function shwowDetailTypeYj2(index) {
        var rowDataS = $("#dg1").datagrid('getData');
        setHaveRead(rowDataS.rows[index].PKID);
        setTimeout("reload_()", 100);
        window.top.createOrSelectTab_(rowDataS.rows[index].MSG_BODY, '0', rowDataS.rows[index].MSG_TITLE, true, true);

    }

    /**消息提醒——点击查看详细信息*/
    function shwowDetailTypeYj3(index) {
        var rowDataS = $("#dg1").datagrid('getData');
        setHaveRead(rowDataS.rows[index].PKID);
        setTimeout("reload_()", 100);
        ShowWindowIframe({
            width: 748,
            height: 400,
            title: '详细信息',
            param: {rowData: rowDataS.rows[index]},
            url: rowDataS.rows[index].MSG_BODY
        })

    }
    /** 刷新列表数据 */
    /*    function reload_() {
        $("#list1").datagrid("reload");
        $("#dg").datagrid("reload");
        $("#dg1").datagrid("reload");
        $("#y01").datagrid("reload");
        $("#y02").datagrid("reload");
        $("#y03").datagrid("reload");
        $("#y04").datagrid("reload");
        $("#y05").datagrid("reload");
     }*/
    function reload_() {
        InitDataGridNum();
        InitDataGridNum2();
        $("#list1").datagrid("reload");
        $("#todo").datagrid("reload");
    }

    function reloadTodo() {
        $("#todo").datagrid("reload");
    }

    function openDetai(row) {
        ShowWindowIframe({
            width: row.WIDTH,
            height: row.HEIGHT,
            title: row.MSG_TITLE,
            param: {type: row.MSG_DATA, recordId: row.RECORD_ID, msgpkid: row.PKID, msgData: row.MSG_DATA, otherId: row.OTHER_ID},
            url: row.MSG_LINK
        });
    }

    function transMsg(row) {
        ShowWindowIframe({
            width: 600,
            height: 300,
            title: '选择接收人',
            param: {msgpkid: row.PKID},
            url: '/views/trans_account_select.shtml'
        })
    }

    /** 刷新列表数据 */
    function _reload(index) {
        switch (index) {
            case 0 :
                window.openTabMessage("/views/ws/work_flow/mytodotask/my_todo_task_list.shtml", "我的待办/待签", '250', true, 0);
                break;
            case 1 :
                window.openTabMessage("/views/ws/work_flow/mytodotask/my_todo_task_list.shtml", "我的待办/待签", '250', true, 1);
                break;
            case 2 :
                window.openTabMessage("/views/yMmRequireInfo/y_mm_require_info_list.shtml", "缺件申请", 'id001', true, 1);
                break;
            case 3 :
                window.openTabMessage("/views/pnApplyManage/pnApplyManage_list.shtml", "新件号申请",  'id002', true, 1);
                break;
            case 4 :
                window.openTabMessage("/views/ws/message/message_list.shtml", "消息列表",  'id003', true);
                break;
            case 5 :
                window.openTabMessage("/views/yWsAffiche_list.shtml", "公告信息",  'id004', true);
                break;
            case 6 :
                window.openTabMessage("/views/ws/sapMonitor/wsSapInterfaceMonitorList.shtml", "SAP接口监控",'1022420', true, true);
                break;
                /*case 6 :
                 window.openTabMessage("http://192.1.1.212:8080/awn-server/", "空客手册", true, true);
                 break;*/
        }
    }

    InitGatewayRequest_({
        // async: false,
        // path: "/amro-ms/login/gateway",
        // data: {
        //     "username" : 667096,
        //     "password" : 123,
        //     "vcode" : 1
        // },
        //
        // successCallBack: function (jdata) {
        //     if (jdata.success == true) {
        //         MsgAlert({content: "网关登录成功"});
        //     } else {
        //         MsgAlert({content: "网关登录失败", type: 'error'});
        //     }
        // }
    });
</script>
