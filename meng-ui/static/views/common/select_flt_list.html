<!--
  ~ Copyright 2019 SF Airlines Co., Ltd. All rights reserved.
  ~ 本文件仅限于顺丰航空有限公司内部传阅，禁止外泄以及用于其他的商业目的。
  -->

<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN"
        "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml">
<head>
    <meta content="text/html; charset=utf-8" http-equiv="Content-Type"/>
    <title>无标题文档</title>
    <link href="/css/jquery-ui-1.8.2.custom.css" rel="stylesheet" type="text/css"/>
    <link href="/css/ui.jqgrid.css" rel="stylesheet" type="text/css"/>
    <link href="/css/dialog_default.css" rel="stylesheet" type="text/css"/>
    <link href="/css/easyui.css" rel="stylesheet" type="text/css"/>
    <link href="/js/jquery/ztree/zTreeStyle.css" rel="stylesheet" type="text/css"/>
    <link href="/css/easyui.css" rel="stylesheet" type="text/css"/>
    <link href="/css/common.css" rel="stylesheet" type="text/css"/>
    <link href="/css/common_qc.css" rel="stylesheet" type="text/css"/>

    <script type="text/javascript" src="/js/constants.js"></script>
    <script src="/js/jquery.min.js?v=2.1.4"></script>
    <!--    <script src="/js/jquery/easyui/jquery-1.8.0.min.js" type="text/javascript"></script>-->

    <script src="/js/bootstrap.min.js?v=3.3.6"></script>
    <script src="/js/plugins/metisMenu/jquery.metisMenu.js"></script>
    <script src="/js/plugins/slimscroll/jquery.slimscroll.min.js"></script>
    <script type="text/javascript" src="/js/plugins/layer/layer.js?style=default"></script>
    <script src="/js/core.min.js?v=4.1.0"></script>
    <script type="text/javascript" src="/js/contabs.min.js"></script>
    <script src="/js/plugins/pace/pace.min.js"></script>

    <script type="text/javascript" src="/js/plugins/cookie/jquery.cookie.js"></script>
    <!-- i18next -->
    <script src="/js/plugins/i18next/i18next.min.js"></script>
    <script type="text/javascript" src="/js/plugins/laytpl/laytpl.js"></script>

    <script type="text/javascript" src="/js/plugins/easyui/jquery.easyui.custom.min.js"></script>
    <script type="text/javascript" src="/js/plugins/easyui/locale/easyui-lang-zh_CN.js"></script>
    <script type="text/javascript" src="/js/base64.js"></script>
    <script type="text/javascript" src="/js/common.js"></script>
    <script type="text/javascript" src="/js/am_auth.js"></script>
    <script type="text/javascript" src="/js/axios.min.js"></script>
    <script type="text/javascript" src="/js/sfa-query-1.0.js"></script>
    <style>


    </style>
</head>
<body>
<div class="listbox">


    <table id="dg"></table>
</div>


</body>


<script type="text/javascript" src="/js/datagrid_utils.js"></script>
<script type="text/javascript" src="/js/date_format.js"></script>

<script type="text/javascript">

    var PAGE_DATA = {};
    var COMBOBOX_DATA = {};




    function i18nCallBack() {

        InitFuncCodeRequest_({
            data: {
                domainCode: "TBM_DATE_RANGE",
                FunctionCode: "ANALYSIS_DOMAIN_BYCODE"
            },
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    PAGE_DATA['dateRange'] = DomainCodeToMap_(jdata.data["TBM_DATE_RANGE"]);
                    InitDataGrid();
                } else {
                    MsgAlert({content: jdata.msg, type: 'error'});
                }
            },

        });
    }
    function InitDataGrid() {
        param = getParentParam_();
        if( param.from == 1){
            $("#dg").MyDataGrid({
                identity: 'dg',
                sortable: true,
                singleSelect: true,
                pageSize: 15,
                pagination: true,     //开启分页
                fitColumns: true,
                queryParams: {ser_acReg: param.obj.acNum,startDate:param.obj.startDate},
                columns: {
                    param: {FunctionCode: 'FLB_AC_LIST'},
                },
                onDblClickRow: function () {
                    var row = $('#dg').datagrid('getSelected'); //获取所选行的数据
                    param.OWindow.$("#serFromFltNo").textbox('setValue', row.serialNumber);
                    window.close();

                },
                onLoadSuccess: function (value, rowData, rowIndex) {


                },
                contextMenus: []
            });
        }else if (param.from == 2){
            $("#dg").MyDataGrid({
                identity: 'dg',
                sortable: true,
                singleSelect: true,
                pageSize: 15,
                pagination: true,     //开启分页
                fitColumns: true,
                queryParams: {ser_acReg: param.obj.acNum,endDate:param.obj.endDate},

                columns: {
                    param: {FunctionCode: 'FLB_AC_LIST'},

                },
                onDblClickRow: function () {
                    var row = $('#dg').datagrid('getSelected'); //获取所选行的数据
                    param.OWindow.$("#serToFltNo").textbox('setValue', row.serialNumber);
                    window.close();

                },
                onLoadSuccess: function (value, rowData, rowIndex) {


                },
                contextMenus: []
            });
        }

    }
    function format2Date(cellvalue) {
        if (cellvalue != null) {
            return cellvalue.split(" ")[0];
        }
        return "";
    }


    /**
     * 截取时间段
     * */
    function format2Time(cellvalue) {
        if (cellvalue != null) {
            var t = cellvalue.split(" ")[1];
            var h = t.split(":")[0];
            var m = t.split(":")[1];
            return h + ":" + m;
        }
        return "";
    }



</script>
</html>