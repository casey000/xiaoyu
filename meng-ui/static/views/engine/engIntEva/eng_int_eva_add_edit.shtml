<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head id="i18n_" module="">
    <!--#include virtual="/views/items/resource_.shtml"-->
    <title>发动机引进评估</title>
    <script type="text/javascript" src="/js/datagrid_utils.js"></script>
    <style type="text/css">
        td {
            padding: 2px;
        }

        button {
            width: 45px;
            height: 20px;
            margin-left: 3px;
            vertical-align: middle;
            border: 1px solid #cfcfcf;
            -moz-border-radius: 5px;
            border-radius: 5px;
            backgroud: #d5d5d5;
        }

        .addBtn {
            padding: 1px 10px;
        }
    </style>
</head>
<body>
<div id="tt" class="easyui-tabs" style="width:99%;height:650px;text-align: center;">
    <table style="width:98%;">
        <tr>
            <td>
                <fieldset class="fieldset_eui">
                    发动机引进评估
                    <input class="btn btn-primary" type="button" onclick="CloseWindowIframe();" value="关闭"
                           style="margin: 5px;margin-left:705px"/>
                </fieldset>
            </td>
        </tr>
    </table>
    <div id="tab1" title="Engine Basic info" style="">
        <form class="form-horizontal m-t" id="mform1">
            <input name="pkid" id="pkid1" type="hidden">
            <table class="table table-bordered table-info" style="width: 98%">
                <tr class ="btnTr">
                    <td colspan="4" align="right" >
                        <fieldset class="fieldset_eui">
                            <input class="btn btn-primary" auth="ENG_INT_EVA11" type="button" id="saveBtn1" onclick="save('1')"
                                   style="margin: 5px;" value="保存"/>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">ENGINE TYPE：</th>
                    <td class="tdr">
                        <input class="easyui-combobox" id="epn" name="epn" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">ESN：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="esn" name="esn" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">ENGINE SUB TYPE：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="epnSub" name="epnSub" data-options="" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">Oil band：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="oilPartNo" name="oilPartNo" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">Introduction：</th>
                    <td class="tdr">
                        <input class="easyui-combobox" id="zzfrom" name="zzfrom" data-options="editable:false,required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">As of Date：</th>
                    <td class="tdr">
                        <input class="easyui-datebox" id="calDate" name="calDate" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">Preservation：</th>
                    <td class="tdr">
                        <input class="easyui-combobox" id="pres" name="pres" data-options="editable:false,required: true" style="width: 200px;"/>
                    </td>
                    <th style="width: 165px;"></th>
                    <td class="tdr"></td>
                </tr>
                <tr>
                    <th style="width: 165px;">Preservation date：</th>
                    <td class="tdr">
                        <input class="easyui-datebox" id="presDate" name="presDate" data-options="editable:false" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">Preservation period：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="presLimit" name="presLimit" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;"></th>
                    <td><p style="color: #cd0a0a">请填写上运营人交付节点数据（不含调机）</p></td>
                </tr>
                <tr>
                    <th style="width: 165px;">TSN：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="tsn1" name="tsn" data-options="required: true,validType:['floatLength[10,2]']" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">CSN：</th>
                    <td class="tdr">
                        <input class="easyui-textbox easyui-numberbox" id="csn1" name="csn" data-options="required: true,validType:['length[1,8]']" missingMessage="必须填写8位以内整数!" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">TSO：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="tso1" name="tso" data-options="required: true,validType:['floatLength[10,2]']" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">CSO：</th>
                    <td class="tdr">
                        <input class="easyui-textbox easyui-numberbox" id="cso1" name="cso" data-options="required: true,validType:['length[1,8]']" missingMessage="必须填写8位以内整数!" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">TSLSV：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="tslsv" name="tslsv" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">CSLSV：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="cslsv" name="cslsv" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">Ferry flight hours：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="fh" name="fh" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">Ferry flight cycles：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="fc" name="fc" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">If EDS are completed：</th>
                    <td class="tdr">
                        <input class="easyui-combobox" id="esdCheck" name="esdCheck" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">If Logbook or historical shop visit reports are completed：</th>
                    <td class="tdr">
                        <input class="easyui-combobox" id="logbookCheck" name="logbookCheck" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">If engine replacement history are completed：</th>
                    <td class="tdr">
                        <input class="easyui-combobox" id="replaceCheck" name="replaceCheck" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">Date of manufacture：</th>
                    <td class="tdr">
                        <input class="easyui-datebox" id="zzprdat" name="zzprdat" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">remark：</th>
                    <td colspan="3">
                                <textarea class="easyui-textbox " id="remark" name="remark" multiline="true"
                                          style="height:100px;width: 98%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">维护人：</th>
                    <td class="tdr">
                        <input class="easyui-textbox modifyName" id="modifyName1" name="modifyName" style="width: 240px;" data-options="onlyview:true,editable:false"/>
                    </td>
                    <th style="width: 165px;">维护日期：</th>
                    <td class="tdr">
                        <input class="easyui-datebox modifyDate" id="modifyDate1" name="modifyDate" style="width: 240px;" data-options="onlyview:true,editable:false"/>
                    </td>
                </tr>
                <tr>
                    <td class="tdr" colspan="4" >
                        <fieldset id="att1" class="fieldset_eui" style="border-width: 1px; border-color: #008000;">
                            <legend data-i18n="">附件：</legend>
                            <input class="btn btn-primary btnTr" type="button" id="uploadBtn1" onclick="uploadInt('1')" style="margin: 5px;margin-left:800px" value="上传"/>
                            <table id='dg1'>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr style="height: 90px">
                    <td colspan="4"></td>
                </tr>
            </table>
        </form>
    </div>
    <div id="tab10" title="Conclusion" style="">
        <form class="form-horizontal m-t" id="mform10">
            <input name="pkid" id="pkid10" type="hidden">
            <table class="table table-bordered table-info" style="width: 98%">
                <tr class ="btnTr">
                    <td colspan="4" align="right" >
                        <fieldset class="fieldset_eui">
                            <input class="btn btn-primary" type="button" id="default10" onclick="defau('10')" style="margin: 5px;" value="批量默认"/>
                            <input class="btn btn-primary" auth="ENG_INT_EVA10" type="button" id="saveBtn10" onclick="save('10')" style="margin: 5px;" value="保存"/>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">Thrust Rating1：</th>
                    <td class="tdr">
                        <input class="easyui-combobox llpType" id="llpType18" name="llpType1" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">Remain Cycle ：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="llpValue18" name="llpValue1" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">Thrust Rating2：</th>
                    <td class="tdr">
                        <input class="easyui-combobox llpType" id="llpType28" name="llpType2" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">Remain Cycle ：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="llpValue28" name="llpValue2" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">If induction：</th>
                    <td class="tdr" colspan="3">
                        <input class="easyui-combobox" id="ifInt" name="ifInt" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">Evaluation：</th>
                    <td class="tdr" colspan="3">
                                <textarea class="easyui-textbox " id="conclusion10" name="conclution" multiline="true"
                                          style="height:200px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">维护人：</th>
                    <td class="tdr">
                        <input class="easyui-textbox modifyName" id="modifyName8" name="modifyName" style="width: 240px;" data-options="onlyview:true,editable:false"/>
                    </td>
                    <th style="width: 165px;">维护日期：</th>
                    <td class="tdr">
                        <input class="easyui-datebox modifyDate" id="modifyDate8" name="modifyDate" style="width: 240px;" data-options="onlyview:true,editable:false"/>
                    </td>
                </tr>
                <tr>
                    <td class="tdr" colspan="4" >
                        <fieldset id="att10" class="fieldset_eui" style="border-width: 1px; border-color: #008000;">
                            <legend data-i18n="">附件：</legend>
                            <input class="btn btn-primary btnTr" type="button" id="uploadBtn10" onclick="uploadInt('10')" style="margin: 5px;margin-left:800px" value="上传"/>
                            <table id='dg10'>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr style="height: 90px">
                    <td colspan="4"></td>
                </tr>
            </table>
        </form>
    </div>
    <div id="tab2" title="AD Status Report" style="">
        <form class="form-horizontal m-t" id="mform2">
            <input name="pkid" id="pkid2" type="hidden">
            <input name="evaId" class="evaId" type="hidden">
            <table class="table table-bordered table-info" style="width: 98%">
                <tr class ="btnTr">
                    <td colspan="4" align="right" >
                        <fieldset class="fieldset_eui">
                            <input class="btn btn-primary" auth="ENG_INT_EVA12" type="button" id="saveBtn2" onclick="save('2')" style="margin: 5px;margin-left:400px" value="保存"/>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <td colspan="4">
                        <div style="margin:30px;margin-left: 120px">
                            <input type="checkbox" id="ma4" name="loAdCheck"  onclick="chooseMa(this)"/> If AD compliance records are completed&nbsp;&nbsp;
                        </div>
                        <div style="margin:30px;margin-left: 120px">
                            <input type="checkbox" id="ma5" name="loAdStatusCheck" data-options="" onclick="chooseMa(this)" />
                            If AD status report issued by last operator is completed&nbsp;&nbsp;
                        </div>
                        <div style="margin:30px;margin-left: 120px">
                            <input type="checkbox" id="ma5a" name="loSbCheck" data-options="" onclick="chooseMa(this)" />
                            If SB status report issued by last operator is provided&nbsp;&nbsp;
                        </div>
                        <div style="margin:30px;margin-left: 120px">
                            <input type="checkbox" id="ma6" name="sfAdCheck" data-options="" onclick="chooseMa(this)"/>If AD status report issued by SF is accomplished&nbsp;&nbsp;
                        </div>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">Evaluation：</th>
                    <td colspan="3">
                                <textarea class="easyui-textbox " id="adEva" name="adEva" multiline="true"
                                          style="height:200px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <td class="tdr" colspan="4" >
                        <fieldset id="att2" class="fieldset_eui" style="border-width: 1px; border-color: #008000;">
                            <legend data-i18n="">附件：</legend>
                            <input class="btn btn-primary btnTr" type="button" id="uploadBtn2" onclick="uploadInt('2')" style="margin: 5px;margin-left:800px" value="上传"/>
                            <table id='dg2'>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr style="height: 90px">
                    <td colspan="4"></td>
                </tr>
            </table>
        </form>
    </div>
    <div id="tab3" title="LLP List" style="">
        <form class="form-horizontal m-t" id="mform3">
            <input name="pkid" id="pkid3" type="hidden">
            <table class="table table-bordered table-info" style="width: 98%">
                <tr class ="btnTr">
                    <td colspan="4" align="right" >
                        <fieldset class="fieldset_eui">
                            <input class="btn btn-primary" auth="ENG_INT_EVA13" type="button" id="saveBtn3" onclick="save('3')" style="margin: 5px;margin-left:400px" value="保存"/>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <td colspan="4">
                        <div style="margin:30px;margin-left: 120px">
                            <input type="checkbox" id="ma7" name="loLlpCheck" onclick="chooseMa(this)"/> If LLP List issued by last operator is completed and accurate&nbsp;&nbsp;
                        </div>
                        <div style="margin:30px;margin-left: 120px">
                            <input type="checkbox" id="ma8" name="sfLlpCheck" data-options="" onclick="chooseMa(this)" />
                            If LLP List issued by SF is accomplished&nbsp;&nbsp;
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="tdr" colspan="4" >
                        <fieldset id="att3" class="fieldset_eui" style="border-width: 1px; border-color: #008000;">
                            <legend data-i18n="">附件：</legend>
                            <input class="btn btn-primary btnTr" type="button" id="uploadBtn3" onclick="uploadInt('3')" style="margin: 5px;margin-left:800px" value="上传"/>
                            <table id='dg3'>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr style="height: 90px">
                    <td colspan="4"></td>
                </tr>
            </table>
        </form>
    </div>
    <div id="tab4" title="LLP BTB" style="">
        <form class="form-horizontal m-t" id="mform4">
            <input name="pkid" id="pkid4" type="hidden">
            <input name="evaId" class="evaId" type="hidden">
            <table width="98%">
                <tr class ="btnTr">
                    <td colspan="4" align="right" >
                        <fieldset class="fieldset_eui">
                            <input class="btn btn-primary" auth="ENG_INT_EVA14" type="button" id="addLlpBtb" onclick="addOrEitLlpBtb('add','')" style="margin: 5px;margin-left:400px" value="新增"/>
                        </fieldset>
                    </td>
                </tr>
            </table>
            <table id="l_dg4"></table>
        </form>
    </div>
    <div id="tab5" title="Repair History" style="">
        <form class="form-horizontal m-t" id="mform5">
            <input name="pkid" id="pkid5" type="hidden">
            <input name="evaId" class="evaId" type="hidden">
            <table width="98%">
                <tr class ="btnTr">
                    <td colspan="4" align="right" >
                        <fieldset class="fieldset_eui">
                            <input class="btn btn-primary" auth="ENG_INT_EVA15" type="button" id="addRepair" onclick="addOrEitIntRepair('add','')" style="margin: 5px;margin-left:400px" value="新增"/>
                        </fieldset>
                    </td>
                </tr>
            </table>
            <table id="l_dg5"></table>
        </form>
    </div>
    <div id="tab6" title="Statements" style="">
        <form class="form-horizontal m-t" id="mform6">
            <input name="pkid" id="pkid6" type="hidden">
            <table class="table table-bordered table-info" style="width: 98%">
                <tr class ="btnTr">
                    <td colspan="4" align="right" >
                        <fieldset class="fieldset_eui">
                            <input class="btn btn-primary" auth="ENG_INT_EVA16" type="button" id="saveBtn6" onclick="save('6')" style="margin: 5px;margin-left:400px" value="保存"/>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <td colspan="4">
                        <div style="float:left;margin:10px;margin-left: 80px">
                            <input type="checkbox" id="ma9" name="otCheck" onclick="chooseMa(this)"/> Oil Type Statement&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </div>
                        <div style="float:left;margin:10px;">
                            <input type="checkbox" id="ma10" name="niaCheck" data-options="" onclick="chooseMa(this)" />
                            Non Incident/Accident Statement&nbsp;&nbsp;
                        </div>
                        <div style="float:left;margin:10px;">
                            <input type="checkbox" id="ma11" name="cdCheck" data-options="" onclick="chooseMa(this)"/>Current data Statement&nbsp;&nbsp;
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="4">
                        <div style="float:left;margin:10px;margin-left: 80px">
                            <input type="checkbox" id="ma12" name="pmaCheck" onclick="chooseMa(this)"/> PMA/DER Statement&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </div>
                        <div style="float:left;margin:10px;">
                            <input type="checkbox" id="ma13" name="etosCheck" data-options="" onclick="chooseMa(this)" />
                            ETOPS Statement&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </div>
                        <div style="float:left;margin:10px;">
                            <input type="checkbox" id="ma14" name="llpslCheck" data-options="" onclick="chooseMa(this)"/>LLP Status List&nbsp;&nbsp;
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="4">
                        <div style="float:left;margin:10px;margin-left: 80px">
                            <input type="checkbox" id="ma15" name="fbdCheck" onclick="chooseMa(this)"/> Fan Blade Distribution&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                        </div>
                        <div style="float:left;margin:10px;">
                            <input type="checkbox" id="ma16" name="trCheck" data-options="" onclick="chooseMa(this)" />
                            Thrust rating statement&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
                            &nbsp;&nbsp;&nbsp;
                        </div>
                        <div style="float:left;margin:10px;">
                            <input type="checkbox" id="ma17" name="mplCheck" data-options=""  onclick="chooseMa(this)"/>Missing_Part_List&nbsp;&nbsp;
                        </div>
                    </td>
                </tr>
                <tr>
                    <td colspan="4">
                        <div style="float:left;margin:10px;margin-left: 80px">
                            <input type="checkbox" id="ma18" name="epsCheck" onclick="chooseMa(this)"/> Engine preservation status&nbsp;&nbsp;
                        </div>
                        <div style="float:left;margin:10px;">
                            <input type="checkbox" id="ma19" name="lruCheck" data-options=""  onclick="chooseMa(this)" />
                            LRU/Accessary Listing&nbsp;&nbsp;
                        </div>
                    </td>
                </tr>
                <tr>
                    <td class="tdr" colspan="4" >
                        <fieldset id="att6" class="fieldset_eui" style="border-width: 1px; border-color: #008000;">
                            <legend data-i18n="">附件：</legend>
                            <input class="btn btn-primary btnTr" type="button" id="uploadBtn6" onclick="uploadInt('6')" style="margin: 5px;margin-left:800px" value="上传"/>
                            <table id='dg6'>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr style="height: 90px">
                    <td colspan="4"></td>
                </tr>
            </table>
        </form>
    </div>
    <div id="tab7" title="Performace Data Report for last 6 months" style="">
        <form class="form-horizontal m-t" id="mform7">
            <input name="pkid" id="pkid7" type="hidden">
            <input name="evaId" class="evaId" type="hidden">
            <table class="table table-bordered table-info" style="width: 98%">
                <tr class ="btnTr">
                    <td colspan="4" align="right" >
                        <fieldset class="fieldset_eui">
                            <input class="btn btn-primary" type="button" id="default5" onclick="defau('7')" style="margin: 5px;" value="批量默认"/>
                            <input class="btn btn-primary" auth="ENG_INT_EVA17" type="button" id="saveBtn5" onclick="save('7')" style="margin: 5px;" value="保存"/>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">As of Date：</th>
                    <td class="tdr">
                        <input class="easyui-datebox" id="asOrDate" name="asOrDate" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">Thrust Rating：</th>
                    <td class="tdr">
                        <input class="easyui-combobox thrustRating" id="thrustRating5" name="thrustRating" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">N1 Vib：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="n1Vib5" name="n1Vib" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">N2 Vib：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="n2Vib5" name="n2Vib" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">N3 Vib：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="n3Vib5" name="n3Vib" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">EGTM：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="egtm" name="egtm" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">Thrust Derate：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="thrustDerate" name="thrustDerate" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">Oil Consumption：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="oilCons" name="oilCons" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">Evaluation：</th>
                    <td colspan="3" class="tdr">
                                <textarea class="easyui-textbox " id="conclusion7" name="perEva" multiline="true"
                                          style="height:200px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">维护人：</th>
                    <td class="tdr">
                        <input class="easyui-textbox modifyName" id="modifyName5" name="modifyName" style="width: 240px;" data-options="onlyview:true,editable:false"/>
                    </td>
                    <th style="width: 165px;">维护日期：</th>
                    <td class="tdr">
                        <input class="easyui-datebox modifyDate" id="modifyDate5" name="modifyDate" style="width: 240px;" data-options="onlyview:true,editable:false"/>
                    </td>
                </tr>
                <tr>
                    <td class="tdr" colspan="4" >
                        <fieldset id="att7" class="fieldset_eui" style="border-width: 1px; border-color: #008000;">
                            <legend data-i18n="">附件：</legend>
                            <input class="btn btn-primary btnTr" type="button" id="uploadBtn7" onclick="uploadInt('7')" style="margin: 5px;margin-left:800px" value="上传"/>
                            <table id='dg7'>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr style="height: 90px">
                    <td colspan="4"></td>
                </tr>
            </table>
        </form>
    </div>
    <div id="tab8" title="Last onwing Ground Run MPA Report" style="">
        <form class="form-horizontal m-t" id="mform8">
            <input name="pkid" id="pkid8" type="hidden">
            <input name="evaId" class="evaId" type="hidden">
            <table class="table table-bordered table-info" style="width: 98%">
                <tr class ="btnTr">
                    <td colspan="4" align="right" >
                        <fieldset class="fieldset_eui">
                            <input class="btn btn-primary" type="button" id="default8" onclick="defau('8')" style="margin: 5px;" value="批量默认"/>
                            <input class="btn btn-primary" auth="ENG_INT_EVA18" type="button" id="saveBtn8" onclick="save('8')" style="margin: 5px;" value="保存"/>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">As of Date：</th>
                    <td class="tdr">
                        <input class="easyui-datebox" id="testDate" name="testDate" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">Thrust Rating：</th>
                    <td class="tdr">
                        <input class="easyui-combobox thrustRating" id="thrustRating6" name="thrustRating" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">N1 Vib：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="n1Vib6" name="n1Vib" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">N2 Vib：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="n2Vib6" name="n2Vib" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">N3 Vib：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="n3Vib6" name="n3Vib" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">BB Vib：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="bbVib" name="bbVib" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">N1：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="n1" name="n1" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">N2：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="n2" name="n2" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">N3：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="n3" name="n3" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">EGT：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="egt" name="egt" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">Acceleration Time：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="acceTime6" name="acceTime" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">FUEL FLOW：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="fuelFlow" name="fuelFlow" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">OIL PRESS：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="oilPress6" name="oilPress" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">OIL TEMP：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="oilTemp" name="oilTemp" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">CALCULATED MIN RATED THRUST EPR：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="cmrte" name="cmrte" data-options="required: true" style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">EEC SUPERVISORY ON MIN RATED THRUST EPR：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="esomrte" name="esomrte" data-options="required: true" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">Evaluation：</th>
                    <td colspan="3" class="tdr">
                                <textarea class="easyui-textbox " id="conclusion8" name="testEva" multiline="true"
                                          style="height:200px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">维护人：</th>
                    <td class="tdr">
                        <input class="easyui-textbox modifyName" id="modifyName6" name="modifyName" style="width: 240px;" data-options="onlyview:true,editable:false"/>
                    </td>
                    <th style="width: 165px;">维护日期：</th>
                    <td class="tdr">
                        <input class="easyui-datebox modifyDate" id="modifyDate6" name="modifyDate" style="width: 240px;" data-options="onlyview:true,editable:false"/>
                    </td>
                </tr>
                <tr>
                    <td class="tdr" colspan="4" >
                        <fieldset id="att8" class="fieldset_eui" style="border-width: 1px; border-color: #008000;">
                            <legend data-i18n="">附件：</legend>
                            <input class="btn btn-primary btnTr" type="button" id="uploadBtn8" onclick="uploadInt('8')" style="margin: 5px;margin-left:800px" value="上传"/>
                            <table id='dg8'>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr style="height: 90px">
                    <td colspan="4"></td>
                </tr>
            </table>
        </form>
    </div>
    <div id="tab9" title="Borescope Inspection Report" style="">
        <form class="form-horizontal m-t" id="mform9">
            <input name="pkid" id="pkid9" type="hidden">
            <input name="evaId" class="evaId" type="hidden">
            <table class="table table-bordered table-info" style="width: 98%">
                <tr class ="btnTr">
                    <td colspan="4" align="right" >
                        <fieldset class="fieldset_eui">
                            <input class="btn btn-primary" type="button" id="default7" onclick="defau('9')" style="margin: 5px;" value="批量默认"/>
                            <input class="btn btn-primary" auth="ENG_INT_EVA19" type="button" id="saveBtn7" onclick="save('9')" style="margin: 5px;" value="保存"/>
                        </fieldset>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">As of Date：</th>
                    <td class="tdr">
                        <input class="easyui-datebox" id="bsiDate" name="bsiDate" data-options="required: true,editable:false" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">TSN：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="tsn9" name="tsn" data-options="required: true,validType:['floatLength[10,2]']"  style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">CSN：</th>
                    <td class="tdr">
                        <input class="easyui-textbox easyui-numberbox" id="csn9" name="csn" data-options="required: true,validType:['length[1,8]']" missingMessage="必须填写8位以内整数!" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">TSO：</th>
                    <td class="tdr">
                        <input class="easyui-textbox" id="tso9" name="tso" data-options="required: true,validType:['floatLength[10,2]']"  style="width: 240px;"/>
                    </td>
                    <th style="width: 165px;">CSO：</th>
                    <td class="tdr">
                        <input class="easyui-textbox easyui-numberbox" id="cso9" name="cso" data-options="required: true,validType:['length[1,8]']" missingMessage="必须填写8位以内整数!" style="width: 240px;"/>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">LPT：</th>
                    <td colspan="3">
                                <textarea class="easyui-textbox " id="lpt" name="lpt" multiline="true"
                                          style="height:100px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">IPC：</th>
                    <td colspan="3">
                                <textarea class="easyui-textbox " id="ipc" name="ipc" multiline="true"
                                          style="height:100px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">LPC：</th>
                    <td colspan="3">
                                <textarea class="easyui-textbox " id="lpc" name="lpc" multiline="true"
                                          style="height:100px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">HPC：</th>
                    <td colspan="3">
                                <textarea class="easyui-textbox " id="hpc" name="hpc" multiline="true"
                                          style="height:100px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">CC：</th>
                    <td colspan="3">
                                <textarea class="easyui-textbox " id="cc" name="cc" multiline="true"
                                          style="height:100px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">HPT：</th>
                    <td colspan="3">
                                <textarea class="easyui-textbox " id="hpt" name="hpt" multiline="true"
                                          style="height:100px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">IPT：</th>
                    <td colspan="3">
                                <textarea class="easyui-textbox " id="ipt" name="ipt" multiline="true"
                                          style="height:100px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 100px;">Evaluation：</th>
                    <td colspan="3" class="tdr">
                                <textarea class="easyui-textbox " id="conclusion9" name="bsiEva" multiline="true"
                                          style="height:200px;width: 99%;border: 1px solid #ddd;border-radius: 5px;"
                                          data-options="required: true"></textarea>
                    </td>
                </tr>
                <tr>
                    <th style="width: 165px;">维护人：</th>
                    <td class="tdr">
                        <input class="easyui-textbox modifyName" id="modifyName7" name="modifyName" style="width: 240px;" data-options="onlyview:true,editable:false"/>
                    </td>
                    <th style="width: 165px;">维护日期：</th>
                    <td class="tdr">
                        <input class="easyui-datebox modifyDate" id="modifyDate7" name="modifyDate" style="width: 240px;" data-options="onlyview:true,editable:false"/>
                    </td>
                </tr>
                <tr>
                    <td class="tdr" colspan="4" >
                        <fieldset id="att9" class="fieldset_eui" style="border-width: 1px; border-color: #008000;">
                            <legend data-i18n="">附件：</legend>
                            <input class="btn btn-primary btnTr" type="button" id="uploadBtn9" onclick="uploadInt('9')" style="margin: 5px;margin-left:800px" value="上传"/>
                            <table id='dg9'>
                            </table>
                        </fieldset>
                    </td>
                </tr>
                <tr style="height: 90px">
                    <td colspan="4"></td>
                </tr>
            </table>
        </form>
    </div>

</div>
<script>
    var PAGE_DATA = {};
    var param = {};
    var operation;
    var pkid;
    var flag;
    var esn;
    var userLogin = getLoginInfo();
    var loginUser = userLogin.accountId;
    var userName = userLogin.userName;
    function i18nCallBack() {
        param = getParentParam_();
        pkid = param.pkid;
        operation = param.operation;
        flag = param.flag;
        esn = param.esn;
        InitFuncCodeRequest_({
            data: {
                domainCode: "ENG_ZZFROM,ENG_INT_THRUST,ENG_INT_MOD_LEVEL,YESORNO," +
                "ENG_INT_EVA_POLICY",
                FunctionCode: "ANALYSIS_DOMAIN_BYCODE"
            },async:false,
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    PAGE_DATA['yesorno'] = DomainCodeToMap_(jdata.data["YESORNO"]);
                    PAGE_DATA['repairLevel'] = DomainCodeToMap_(jdata.data["ENG_INT_MOD_LEVEL"]);
                    InitGatewayRequest_({
                        type: "get",
                        async: false,
                        path: "/meng-engine/baseOwn/getEngTypeNew",
                        successCallBack: function (jdata) {
                            if (jdata.success == true) {
                                $('#epn').combobox({
                                    data: jdata.obj,
                                    valueField: 'VALUE',
                                    textField: 'TEXT',
                                    panelHeight: '150px',
                                });
                            } else {
                                MsgAlert({content: '获取发动机型号列表失败', type: 'error'});
                            }
                        }
                    });
                    $('#pres').combobox({
                        panelHeight: '150px',
                        data: jdata.data.YESORNO,
                        valueField: 'VALUE',
                        textField: 'TEXT',
                        onSelect: function (item) {
                            if(item.TEXT=='是'){
                                $("#presDate").datebox({editable:true,required:true,onlyview:false});
                            }else{
                                $("#presDate").datebox('setValue','');
                                $("#presDate").datebox({editable:false,required:false,onlyview:true});

                            }
                        }
                    });
                    $('#ifInt').combobox({
                        panelHeight: '150px',
                        data: jdata.data.ENG_INT_EVA_POLICY,
                        valueField: 'VALUE',
                        textField: 'TEXT'
                    });
                    $('#esdCheck').combobox({
                        panelHeight: '150px',
                        data: jdata.data.YESORNO,
                        valueField: 'VALUE',
                        textField: 'TEXT'
                    });
                    $('#logbookCheck').combobox({
                        panelHeight: '150px',
                        data: jdata.data.YESORNO,
                        valueField: 'VALUE',
                        textField: 'TEXT'
                    });
                    $('#replaceCheck').combobox({
                        panelHeight: '150px',
                        data: jdata.data.YESORNO,
                        valueField: 'VALUE',
                        textField: 'TEXT'
                    });
                    $('#zzfrom').combobox({
                        panelHeight: '150px',
                        data: jdata.data.ENG_ZZFROM,
                        valueField: 'VALUE',
                        textField: 'TEXT',
                        onSelect: function (item) {
                            if(item.TEXT=='随机引进'){
                                $("#fh").textbox({editable:true,required:true,onlyview:false});
                                $("#fc").textbox({editable:true,required:true,onlyview:false});
                            }else{
                                $("#fh").textbox('setValue','');
                                $("#fc").textbox('setValue','');
                                $("#fh").textbox({editable:false,required:false,onlyview:true});
                                $("#fc").textbox({editable:false,required:false,onlyview:true});
                            }
                        }
                    });
                    $('#repairLevel').combobox({
                        panelHeight: '150px',
                        data: jdata.data.ENG_INT_MOD_LEVEL,
                        valueField: 'VALUE',
                        textField: 'TEXT'
                    });
                    $('.llpType').combobox({
                        panelHeight: '150px',
                        data: jdata.data.ENG_INT_THRUST,
                        valueField: 'VALUE',
                        textField: 'TEXT'
                    });
                    $('.thrustRating').combobox({
                        panelHeight: '150px',
                        data: jdata.data.ENG_INT_THRUST,
                        valueField: 'VALUE',
                        textField: 'TEXT'
                    });
                    if(operation == "view"){
                        $(".easyui-textbox").textbox({required:false,editable:false,onlyview:true});
                        $(".easyui-combobox").combobox({required:false,editable:false,onlyview:true});
                        $(".easyui-datebox").datebox({required:false,editable:false,onlyview:true});
                        $("#closeReason").textbox({required:false});
                        $('.btnTr').hide();
                    }else{
                        $(".modifyName").textbox('setValue',userName);
                        $(".modifyDate").datebox('setValue',new Date().Format('yyyy-MM-dd'));
                        if(operation == "edit"){
                            $("#epn").combobox({required:false,editable:false,onlyview:true});
                            $("#esn").textbox({required:false,editable:false,onlyview:true});
                        }
                    }

                    if(pkid){
                        InitSubPkid(pkid);
                        InitDataForm('1',pkid);
                        InitDataGrid('1',pkid, 'engIntEva');
                    }
                    /**实现tab切换后保存，并刷新*/
                    $('#tt').tabs({
                        onSelect: function (title) {
                            var num = '';
                            var vpkid = '';
                            var cat = '';
                            if (title == 'AD Status Report') {
                                num = '2';
                                cat = 'engIntAd';
                            }
                            if (title == 'LLP List') {
                                num = '3';
                                $("#mform"+num+" #pkid"+num).val(pkid)
                                cat = 'engIntLlpList';
                            }
                            if (title == 'LLP BTB') {
                                num = '4';
                                cat = 'engIntLlpBtb';
                                InitBtbGrid();
                            }
                            if (title == 'Repair History') {
                                num = '5';
                                cat = 'engIntRepair';
                                InitRepairGrid();
                            }
                            if (title == 'Statements') {
                                num = '6';
                                cat = 'engIntStatements';
                                $("#mform"+num+" #pkid"+num).val(pkid)
                            }
                            if (title == 'Performace Data Report for last 6 months') {
                                num = '7';
                                cat = 'engIntPer';
                            }
                            if (title == 'Last onwing Ground Run MPA Report') {
                                num = '8';
                                cat = 'engIntTest';
                            }
                            if (title == 'Borescope Inspection Report') {
                                num = '9';
                                cat = 'engIntBsi';
                            }

                            if (title == 'Engine Basic info' || title == 'LLP List'
                                || title == 'Statements'|| title == 'Conclusion') {
                                if(title == 'Engine Basic info'){
                                    num = '1';
                                    cat = 'engIntEva';
                                }else if(title == 'Conclusion'){
                                    num = '10';
                                    $("#mform"+num+" #pkid"+num).val(pkid)
                                    cat = 'engIntConclution';
                                }
                                vpkid = pkid;
                            }else{
                                vpkid = $("#mform"+num+" #pkid"+num).val();
                            }
                            if(!vpkid){
                                vpkid = '-1';
                            }
                            if(num != '4' && num != '5'){
                                InitDataForm(num,vpkid);
                                InitDataGrid(num,vpkid, cat);
                            }
                        }
                    });
                } else {
                    MsgAlert({content: jdata.msg, type: 'error'});
                }
            }
        });

        var zzfrom = $("#zzfrom").combobox("getValue");
        if(zzfrom=='1'){
            $("#fh").textbox({editable:true,onlyview:false});
            $("#fc").textbox({editable:true,onlyview:false});
        }else{
            $("#fh").textbox('setValue','');
            $("#fc").textbox('setValue','');
            $("#fh").textbox({editable:false,onlyview:true});
            $("#fc").textbox({editable:false,onlyview:true});
        }

    }

    //初始化子表pkid
    function InitSubPkid(pkid){
        var intform = '';
        var intpath = '/meng-engine/engIntEva/getSubPkid';
        InitGatewayRequest_({
            async: false,
            path: intpath,
            data: {pkid:pkid},
            successCallBack: function (jdata) {
                if (jdata.success == true) {
                    var data = jdata.obj;
                    if (data != null) {
                        var tempId = '';
                        for(var i=1;i<=10;i++){
                            tempId = "pkid"+i;
                            intform = "#mform"+i;
                            if(i <= 3){
                                $(intform+" #pkid"+i).val(pkid);
                                if(i == 2){
                                    $(intform+" #pkid"+i).val(data[tempId]);//取数组中的key
                                }
                            }else{
                                if(i == 6 || i == 10){
                                    $(intform+" #pkid"+i).val(pkid);
                                }else if(i == 7 || i == 8 || i == 9){
                                    $(intform+" #pkid"+i).val(data[tempId]);//取数组中的key
                                }
                            }
                        }
                    }
                } else {
                    MsgAlert({content: "初始化子表pkid失败!", type: 'error'});
                }
            }
        });
    }


    //回显
    function InitDataForm(num,pkid) {
        var intpath = '';
        if(num == '1' || num == '3' || num == '6'  || num == '10'){
            //给所有页面的外键赋值
            $(".evaId").val(pkid);
            intpath = "/meng-engine/engIntEva/selectById" + "/" + pkid;
        }else if(num == '2'){
            intpath = "/meng-engine/engIntAd/selectById" + "/" + pkid;
        }else if(num == '7'){
            intpath = "/meng-engine/engIntPer/selectById" + "/" + pkid;
        }else if(num == '8'){
            intpath = "/meng-engine/engIntTest/selectById" + "/" + pkid;
        }else if(num == '9'){
            intpath = "/meng-engine/engIntBsi/selectById" + "/" + pkid;
        }
        InitGatewayRequest_({
            type: "get",
            async: false,
            path: intpath,
            successCallBack: function (jdata) {
                if (jdata.success == true) {
                    var tempData = jdata.obj;
                    ParseFormField_(tempData, $("#mform"+num));
                    if(tempData){
                        setChecked(tempData);
                    }
                } else {
                    MsgAlert({content: '操作失败', type: 'error'});
                }
            }
        });
    }

    //保存
    function save(num) {
        var intform= "#mform"+num;
        var isValidate = $(intform).form('validate');
        if (!isValidate) {
            return;
        }
        var $form = $(intform);
        var datas = $form.serializeObject();
        var intpath = '';
        var mpkid = '';
        if(num != '1'){
            mpkid = $("#mform1 #pkid1").val();
            if(!mpkid){
                alert("请先保存Engine Basic info!");
                return;
            }
        }
        var mark_value =[];
        $('input[name="provAction"]:checked').each(function(){
            mark_value.push($(this).val());
        });
        if(mark_value.length != 0){
            datas['provAction'] = mark_value.join(',');
        }
        var str = '';
        if(mark_value != null && mark_value.length > 0){
            str = mark_value.join(',');
        }
        if(num == '1' || num == '3' || num == '6' || num == '10'){
            //1.保存Engine Basic info
            intpath = '/meng-engine/engIntEva/addOrEditIntEva';
        }else if(num == '2'){
            //2.ad/sb状态评估
            intpath = '/meng-engine/engIntAd/addOrEditIntAd';
        }else if(num == '7'){
            //7.Performace Data Report for last 6 months
            intpath = '/meng-engine/engIntPer/addOrEditIntPer';
        }else if(num == '8'){
            //8.Last onwing Ground Run MPA Report
            intpath = '/meng-engine/engIntTest/addOrEditIntTest';
        }else if(num == '9'){
            //9.Borescope Inspection Report
            intpath = '/meng-engine/engIntBsi/addOrEditIntBsi';
        }
        InitGatewayRequest_({
            async: false,
            path: intpath,
            data: datas,
            successCallBack: function (jdata) {
                if (jdata.success == true) {
                    var data = jdata.obj;
                    if (data != null) {
                        $(intform+" #pkid"+num).val(data.pkid);
                        if(num == '1'){
                            var mpkid = $("#mform1 #pkid1").val();
                            $(".evaId").val(mpkid);
                            pkid = data.pkid;
                        }
                        operation = 'edit';
                        MsgAlert({content: jdata.msg ? jdata.msg : $.i18n.t('msg_tip:TIP.COMMON.OPT_SUCCESS')});
                        param.OWindow.reload_();
                    }
                } else {
                    MsgAlert({content: "保存失败!", type: 'error'});
                }
            }
        });
    }


    //上传附件
    function uploadInt(num) {
        var pkid = $("#mform"+num+" #pkid"+num).val();
        if(!pkid){
            MsgAlert({content: "请先保存上面表单信息!", type: 'error'});
            return;
        }
        var category = 'engInt';
        var dg = 'dg'+num;
        if(dg == 'dg1'){
            category = 'engIntEva';
        }else if(dg == 'dg2'){
            category = 'engIntAd';
        }else if(dg == 'dg3'){
            category = 'engIntLlpList';
        }else if(dg == 'dg6'){
            category = 'engIntStatements';
        }else if(dg == 'dg7'){
            category = 'engIntPer';
        }else if(dg == 'dg8'){
            category = 'engIntTest';
        }else if(dg == 'dg9'){
            category = 'engIntBsi';
        }else if(dg == 'dg10'){
            category = 'engIntConclution';
        }
        common_uploadFile2({
            identity: dg,
            param: {
                cat: category,
                sourceId: pkid,
                successCellBack: function () {
                    reloadAtt(num,pkid, category);
                },
                fialCellBack: ""
            }
        });
    }

    //初始化附件列表
    function InitDataGrid(num,pkid, category) {
        InitFuncCodeRequest_({
            data: {
                SOURCE_ID: pkid,
                CATEGORY: category,
                FunctionCode: 'ATTACHMENT_RSPL_GET'
            },
            successCallBack: function (jdata) {
                var trHTML = '';
                var dg = "#dg"+num;
                var temp = "dg"+num;
                var attr = '';
                if(window.document.getElementById(temp) != null){
                    attr = window.document.getElementById(temp).innerHTML;
                }
                if(attr){
                    window.document.getElementById(temp).innerHTML = '';
                }
                if (operation == "view") {
                    for (var i = 0; i < jdata.data.length; i++) {
                        trHTML = '<tr align="left"><td class="td5" align="left" style="text-align:left;"><a target="_blank" onclick="downFile(' + jdata.data[i].PKID + ',' + jdata.data[i].PKID + ')">' + jdata.data[i].ORG_NAME + '</a></td></tr>';
                        $(dg).append(trHTML);//在table最后面添加一行
                    }
                } else {
                    for (var i = 0; i < jdata.data.length; i++) {
                        trHTML = '<tr align="left"><td class="td5" align="left" style="text-align:left;"><a target="_blank" onclick="downFile(' + jdata.data[i].PKID + ',' + jdata.data[i].PKID + ')">'
                            + jdata.data[i].ORG_NAME + '</a></td><td class="td5" align="left" style="text-align:left;"><input class="btn btn-primary" type="button"  value="删除" style="width: 50px;margin:5px;" ' +
                            'onclick="deleteFile('+ jdata.data[i].PKID+ ','+ num+ ',\''+ pkid+ '\',\''+ category +'\''+ ');return false;"/></td></tr>';
                        $(dg).append(trHTML);//在table最后面添加一行
                    }
                }
            }
        });
    }


    //删除附件
    function deleteFile(attPkid,num,pkid, category) {
        if (!confirm("是否刪除"))
            return;
        InitFuncCodeRequest_({
            data: {pkid: attPkid, FunctionCode: 'ATTACHMENT_DEL'}, async: false,
            successCallBack: function (jdata) {
                if (jdata.code == 200) {
                    MsgAlert({content: jdata.msg ? jdata.msg : $.i18n.t('msg_tip:TIP.COMMON.OPT_SUCCESS')});
                    reloadAtt(num,pkid, category);
                }
            }
        });
    }

    function reloadAtt(num,pkid, category){
        InitDataGrid(num,pkid, category);
    }

    //批量默认
    function defau(num){
        if (!confirm("确认批量默认？")){
            return;
        }
        var intform= "#mform"+num;
        var tsn = '';
        var csn = '';
        var tso = '';
        var cso = '';
        var conclusion = '';
        var ifInt = $('#ifInt').combobox('getValue');
        if(num == '7' || num == '8' || num == '9' || num == '10'){
           if(num == '9'){
                tsn = $(intform+" #tsn"+num).textbox('getValue');
                csn = $(intform+" #csn"+num).textbox('getValue');
                tso = $(intform+" #tso"+num).textbox('getValue');
                cso = $(intform+" #cso"+num).textbox('getValue');
            }
            conclusion = $(intform+" #conclusion"+num).textbox('getValue');
        }
        $(intform+" .easyui-textbox").textbox('setValue','Not provided');
        $(intform+" .easyui-combobox").textbox('setValue','Not provided');
        if(num == '7' || num == '8' || num == '9' || num == '10'){
            if(num == '9'){
                $(intform+" #tsn"+num).textbox('setValue',tsn);
                $(intform+" #csn"+num).textbox('setValue',csn);
                $(intform+" #tso"+num).textbox('setValue',tso);
                $(intform+" #cso"+num).textbox('setValue',cso);
            }
            $(intform+" #conclusion"+num).textbox('setValue',conclusion);
        }
        $('#ifInt').combobox('setValue',ifInt);
        if(operation != "view"){
            $('.modifyName').textbox('setValue',userName);
        }
    }

    //tab4
    function InitBtbGrid() {
        var identity = '#l_dg4';
        var queryParams = $("#mform4").serializeObject();
        $(identity).GatewayDataGrid({
            identity: identity,
            queryParams: queryParams,
            pagination: true,
            path: "/meng-engine/engIntLlpBtb/listByPage",
            resize: function () {
                return {
                    height: $(document.body).height() - 165,
                    width: $(document.body).width()-32
                };
            },
            columns: {
                param: {FunctionCode: 'ENG_INT_LLP_BTB_LIST'},
                alter: {
                    ifPass:{
                        formatter: function (value) {
                            return PAGE_DATA['yesorno'][value];
                        }
                    },
                    modifyDate: {
                        type: 'date'
                    }
                }
            },
            contextMenus: [
                {
                    id: "m-edit", i18nText: "编辑",
                    auth: "",
                    onclick: function () {
                        var rowData = $(identity).datagrid('getSelected');
                        if (!rowData.pkid) {
                            MsgAlert({content: "请选择数据！", type: 'error'});
                            return;
                        }
                        addOrEitLlpBtb('edit', rowData.pkid);
                    }
                },
                {
                    id: "m-delete", i18nText: "删除",
                    auth: "",
                    onclick: function () {
                        var rowData = $(identity).datagrid('getSelected');
                        if (!rowData.pkid) {
                            MsgAlert({content: "请选择数据！", type: 'error'});
                            return;
                        }
                        if (!confirm("是否确认删除？")) {
                            return;
                        }
                        delIntLlpBtb(rowData.pkid);
                    }
                },
            ],
            validAuth: function (row, items) {
                if (loginUser != row.createUser || operation == 'view') {
                    items['编辑'].enable = false;
                    items['删除'].enable = false;
                }
                return items;
            },
            onDblClickRow: function (index, field, value) {
                addOrEitLlpBtb('view',value.pkid);
            }
        });
    }

    //tab5
    function InitRepairGrid() {
        var identity = '#l_dg5';
        var queryParams = $("#mform5").serializeObject();
        $(identity).GatewayDataGrid({
            identity: identity,
            queryParams: queryParams,
            pagination: true,
            path: "/meng-engine/engIntRepair/listByPage",
            resize: function () {
                return {
                    height: $(document.body).height() - 165,
                    width: $(document.body).width()-32
                };
            },
            columns: {
                param: {FunctionCode: 'ENG_INT_REPAIR_LIST'},
                alter: {
                    repairDate: {
                        type: 'date'
                    },
                    repairLevel:{
                        formatter: function (value) {
                            return PAGE_DATA['repairLevel'][value];
                        }
                    },
                    ifPass:{
                        formatter: function (value) {
                            return PAGE_DATA['yesorno'][value];
                        }
                    },
                    modifyDate: {
                        type: 'date'
                    }
                }
            },
            contextMenus: [
                {
                    id: "m-edit", i18nText: "编辑",
                    auth: "",
                    onclick: function () {
                        var rowData = $(identity).datagrid('getSelected');
                        if (!rowData.pkid) {
                            MsgAlert({content: "请选择数据！", type: 'error'});
                            return;
                        }
                        addOrEitIntRepair('edit', rowData.pkid);
                    }
                },
                {
                    id: "m-delete", i18nText: "删除",
                    auth: "",
                    onclick: function () {
                        var rowData = $(identity).datagrid('getSelected');
                        if (!rowData.pkid) {
                            MsgAlert({content: "请选择数据！", type: 'error'});
                            return;
                        }
                        if (!confirm("是否确认删除？")) {
                            return;
                        }
                        delIntRepair(rowData.pkid);
                    }
                },
            ],
            validAuth: function (row, items) {
                if (loginUser != row.createUser || operation == 'view') {
                    items['编辑'].enable = false;
                    items['删除'].enable = false;
                }
                return items;
            },
            onDblClickRow: function (index, field, value) {
                addOrEitIntRepair('view',value.pkid);
            }
        });
    }


    function chooseMa(ma){
       if(ma.checked){
           ma.value = 'Y';
       }else{
           ma.value = 'N';
       }
    }

    function setChecked(tempData){
//        if (tempData.esdCheck == 'Y') {
//            $(':checkbox[name=esdCheck]').prop('checked', true);
//            document.getElementById("ma1").value = 'Y';
//        }
//        if (tempData.logbookCheck == 'Y') {
//            $(':checkbox[name=logbookCheck]').prop('checked', true);
//            document.getElementById("ma2").value = 'Y';
//        }
//        if (tempData.replaceCheck == 'Y') {
//            $(':checkbox[name=replaceCheck]').prop('checked', true);
//            document.getElementById("ma3").value = 'Y';
//        }
        if (tempData.loAdCheck == 'Y') {
            $(':checkbox[name=loAdCheck]').prop('checked', true);
            document.getElementById("ma4").value = 'Y';
        }
        if (tempData.loAdStatusCheck == 'Y') {
            $(':checkbox[name=loAdStatusCheck]').prop('checked', true);
            document.getElementById("ma5").value = 'Y';
        }
        if (tempData.loSbCheck == 'Y') {
            $(':checkbox[name=loSbCheck]').prop('checked', true);
            document.getElementById("ma5a").value = 'Y';
        }
        if (tempData.sfAdCheck == 'Y') {
            $(':checkbox[name=sfAdCheck]').prop('checked', true);
            document.getElementById("ma6").value = 'Y';
        }
        if (tempData.loLlpCheck == 'Y') {
            $(':checkbox[name=loLlpCheck]').prop('checked', true);
            document.getElementById("ma7").value = 'Y';
        }
        if (tempData.sfLlpCheck == 'Y') {
            $(':checkbox[name=sfLlpCheck]').prop('checked', true);
            document.getElementById("ma8").value = 'Y';
        }
        if (tempData.otCheck == 'Y') {
            $(':checkbox[name=otCheck]').prop('checked', true);
            document.getElementById("ma9").value = 'Y';
        }
        if (tempData.niaCheck == 'Y') {
            $(':checkbox[name=niaCheck]').prop('checked', true);
            document.getElementById("ma10").value = 'Y';
        }
        if (tempData.cdCheck == 'Y') {
            $(':checkbox[name=cdCheck]').prop('checked', true);
            document.getElementById("ma11").value = 'Y';
        }
        if (tempData.pmaCheck == 'Y') {
            $(':checkbox[name=pmaCheck]').prop('checked', true);
            document.getElementById("ma12").value = 'Y';
        }
        if (tempData.etosCheck == 'Y') {
            $(':checkbox[name=etosCheck]').prop('checked', true);
            document.getElementById("ma13").value = 'Y';
        }
        if (tempData.llpslCheck == 'Y') {
            $(':checkbox[name=llpslCheck]').prop('checked', true);
            document.getElementById("ma14").value = 'Y';
        }
        if (tempData.fbdCheck == 'Y') {
            $(':checkbox[name=fbdCheck]').prop('checked', true);
            document.getElementById("ma15").value = 'Y';
        }
        if (tempData.trCheck == 'Y') {
            $(':checkbox[name=trCheck]').prop('checked', true);
            document.getElementById("ma16").value = 'Y';
        }
        if (tempData.mplCheck == 'Y') {
            $(':checkbox[name=mplCheck]').prop('checked', true);
            document.getElementById("ma17").value = 'Y';
        }
        if (tempData.epsCheck == 'Y') {
            $(':checkbox[name=epsCheck]').prop('checked', true);
            document.getElementById("ma18").value = 'Y';
        }
        if (tempData.lruCheck == 'Y') {
            $(':checkbox[name=lruCheck]').prop('checked', true);
            document.getElementById("ma19").value = 'Y';
        }
    }

    //tab4
    function addOrEitLlpBtb(operation,pkid){
        var evaId = $('.evaId').val();
        var title_ = $.i18n.t('添加或编辑--发动机引进评估LLP BTB');
        ShowWindowIframe({
            width: "950",
            height: "650",
            title: title_,
            param: {pkid: pkid, operation: operation,evaId:evaId},
            url: "/views/engine/engIntEva/eng_int_llp_btb_add_edit.shtml"
        });
    }

    function delIntLlpBtb(pkid){
        var cou = '';
        var datas = {"pkid":pkid};
        InitGatewayRequest_({
            async: false,
            data:datas,
            path: "/meng-engine/engIntLlpBtb/delIntLlpBtb",
            successCallBack: function (jdata) {
                if (jdata.success == true) {
                    cou = jdata.obj;
                    if(cou > 0){
                        MsgAlert({content: $.i18n.t('msg_tip:TIP.COMMON.OPT_SUCCESS')});
                        reload_('#l_dg4');
                    }
                } else {
                    MsgAlert({content: "删除失败!", type: 'error'});
                }
            }
        });
    }

    //tab5
    function addOrEitIntRepair(operation,pkid){
        var epn = $('#epn').combobox('getValue');
        var evaId = $('.evaId').val();
        var title_ = $.i18n.t('添加或编辑--Repair History');
        ShowWindowIframe({
            width: "800",
            height: "650",
            title: title_,
            param: {pkid: pkid, operation: operation,evaId:evaId,epn:epn},
            url: "/views/engine/engIntEva/eng_int_repair_add_edit.shtml"
        });
    }

    function delIntRepair(pkid){
        var cou = '';
        var datas = {"pkid":pkid};
        InitGatewayRequest_({
            async: false,
            data:datas,
            path: "/meng-engine/engIntRepair/delIntRepair",
            successCallBack: function (jdata) {
                if (jdata.success == true) {
                    cou = jdata.obj;
                    if(cou > 0){
                        MsgAlert({content: $.i18n.t('msg_tip:TIP.COMMON.OPT_SUCCESS')});
                        reload_('#l_dg5');
                    }
                } else {
                    MsgAlert({content: "删除失败!", type: 'error'});
                }
            }
        });
    }

    //刷新列表
    function reload_(dg){
        $(dg).datagrid("reload");
    }

</script>
</body>
</html>