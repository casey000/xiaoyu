<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>

<head id="i18n_" module="">
    <!--#include virtual="/views/items/resource_.shtml"-->
    <title>磁堵检测报告</title>
    <script type="text/javascript" src="/js/datagrid_utils.js"></script>
    <style type="text/css">
        td {
            padding: 2px;
        }

        button {
            width: 45px;
            height: 20px;
            margin-left: 3px;
            vertical-align: middle;
            border: 1px solid #cfcfcf;
            -moz-border-radius: 5px;
            border-radius: 5px;
            backgroud: #d5d5d5;
        }

        .addBtn {
            padding: 1px 10px;
        }
    </style>
</head>
<body>
<div style="width:95%;margin:0 auto;">
    <div class="ibox float-e-margins">
        <div class="ibox-content">
            <form class="form-horizontal m-t" id="mform">
                <div id="p0" class="easyui-panel" title="磁堵检测报告" style="width: 100%;"></div>
                <input type="hidden" id="pkid" name="pkid"/>
                <input type="hidden" id="deleteFlag" name="deleteFlag"/>
                <input type="hidden" id="elemAll" name="elemAll"/>
                <input type="hidden" id="modifyUser" name="modifyUser"/>
                <table class="table table-bordered table-info" style="width: 100%">
                    <tr>
                        <td colspan="6" align="right" style="padding: 0;">
                            <input class="btn btn-primary" type="button" id="saveBtn" onclick="save()" value="保存"/>
                            <input class="btn btn-primary" type="button" onclick="CloseWindowIframe();" value="关闭"
                                   style="margin-left:3px;margin-right: 20px;"/>
                        </td>
                    </tr>
                    <tr>
                        <th>材料名称：</th>
                        <td class="tdr" style="width: 100px;">
                            <input class="easyui-textbox" id="mateName" name="mateName" data-options="required:true"
                                   style="width: 240px;"/>
                        <th style="width:40px;">材料类别：</th>
                        <td class="tdr" style="width: 100px;">
                            <input class="easyui-combobox" id="mateType" name="mateType"
                                   data-options="required:true,editable:false,validType:'comboBoxEditvalid[\'mateType\']'"
                                   style="width: 190px;"/>
                        </td>
                        <th style="width:40px;">碎屑性质：</th>
                        <td class="tdr" style="width:100px">
                            <input class="easyui-combobox" id="chipType" name="chipType"
                                   data-options="required:true,editable:false,validType:'comboBoxEditvalid[\'chipType\']'"
                                   style="width: 193px"/>
                        </td>
                    </tr>
                    <tr>
                        <th>碎屑描述：</th>
                        <td class="tdr" colspan="5">
                            <input class="easyui-textbox" id="chipDesc" name="chipDesc" data-options="required:true"
                                   style="width: 814px;"/>
                        </td>
                    </tr>
                </table>
                <div id="elementAllNum">
                    <div id="p1" class="easyui-panel" title="元素含量" style="width: 100%;"></div>
                    <div id="showedElements" style="width: 100%;height: auto;float: left">
                        <table class="table table-bordered table-info" style="width: 100%" id="elementNum">
                            <tr>
                                <th style="width: 120px;"><span style="color: #dd0000">A</span>铝Al：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemAl" name="elemAl"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">B</span>硼B：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemB" name="elemB"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">C</span>碳C：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemC" name="elemC"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钴Co：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemCo" name="elemCo"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铬Cr：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemCr" name="elemCr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铜Cu：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemCu" name="elemCu"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">F</span>铁Fe：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemFe" name="elemFe"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;"><span style="color: #dd0000">M</span>镁Mg：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemMg" name="elemMg"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锰Mn：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemMn" name="elemMn"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钼Mo：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemMo" name="elemMo"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">S</span>硅Si：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemSi" name="elemSi"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">T</span>钛Ti：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemTi" name="elemTi"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">W</span>钨W：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemW" name="elemW"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">Z</span>锌Zn：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemZn" name="elemZn"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                    <div style="width: 100%;height: 24px;float: left;line-height: 24px;">
                        <a id="moreEleButton" href="javascript:void(0)" onclick="showOrHideElements()"
                           style="text-decoration: underline;font-size: 12px;color: blue;font-weight: bold">
                            更多元素》》》</a></div>
                    <div id="moreElement" style="width: 100%;height: auto;float: left">
                        <table class="table table-bordered table-info" style="width: 100%" id="elementNum1">
                            <tr>
                                <th style="width: 120px;"><span style="color: #dd0000">A</span>锕Ac：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemAc" name="elemAc"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">银Ag：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemAg" name="elemAg"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">镅Am：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemAm" name="elemAm"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">氬Ar：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemAr" name="elemAr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">砷As：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemAs" name="elemAs"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">砹At：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemAt" name="elemAt"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">金Au：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemAu" name="elemAu"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;"><span style="color: #dd0000">B</span>钡Ba：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemBa" name="elemBa"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铍Be：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemBe" name="elemBe"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">𬭛Bh：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemBh" name="elemBh"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铋Bi：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemBi" name="elemBi"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锫Bk：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemBk" name="elemBk"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">溴Br：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemBr" name="elemBr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">C</span>钙Ca：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemCa" name="elemCa"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;">镉Cd：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemCd" name="elemCd"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铈Ce：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemCe" name="elemCe"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锎Cf：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemCf" name="elemCf"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">氯CI：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemCl" name="elemCl"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锔Cm：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemCm" name="elemCm"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铯Cs：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemCs" name="elemCs"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">D</span>𬭊Db：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemDb" name="elemDb"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;"><span style="color: #dd0000">D</span>𫟼Ds：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemDs" name="elemDs"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">镝Dy：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemDy" name="elemDy"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">E</span>铒Er：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemEr" name="elemEr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锿Es：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemEs" name="elemEs"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铕Eu：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemEu" name="elemEu"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">F</span>氟F：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemF" name="elemF"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">镄Fm：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemFm" name="elemFm"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;">钫Fr：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemFr" name="elemFr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">G</span>镓Ga：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemGa" name="elemGa"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锗Ge：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemGe" name="elemGe"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钆Gd：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemGd" name="elemGd"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">H</span>氢H：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemH" name="elemH"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">氦He：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemHe" name="elemHe"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铪Hf：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemHf" name="elemHf"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;">汞Hg：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemHg" name="elemHg"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钬Ho：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemHo" name="elemHo"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">𬭶Hs：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemHs" name="elemHs"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">I</span>碘I：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemI" name="elemI"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铟In：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemIn" name="elemIn"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铱Ir：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemIr" name="elemIr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">K</span>钾K：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemK" name="elemK"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;">氪Kr：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemKr" name="elemKr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">L</span>镧La：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemLa" name="elemLa"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锂Li：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemLi" name="elemLi"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铹Lr：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemLr" name="elemLr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">镥Lu：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemLu" name="elemLu"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">M</span>钔Md：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemMd" name="elemMd"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">鿏Mt：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemMt" name="elemMt"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;"><span style="color: #dd0000">N</span>氮N：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemN" name="elemN"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钠Na：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemNa" name="elemNa"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铌Nb：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemNb" name="elemNb"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钕Nd：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemNd" name="elemNd"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                <th style="width: 120px;">氖Ne：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemNe" name="elemNe"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">镍Ni：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemNi" name="elemNi"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锘No：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemNo" name="elemNo"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;">镎Np：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemNp" name="elemNp"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">O</span>氧O：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemO" name="elemO"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锇Os：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemOs" name="elemOs"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">P</span>磷P：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemP" name="elemP"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">镤Pa：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemPa" name="elemPa"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铅Pb：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemPb" name="elemPb"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钯Pd：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemPd" name="elemPd"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;">钷Pm：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemPm" name="elemPm"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钋Po：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemPo" name="elemPo"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">镨Pr：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemPr" name="elemPr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铂Pt：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemPt" name="elemPt"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钚Pu：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemPu" name="elemPu"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">R</span>镭Ra：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemRa" name="elemRa"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铷Rb：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemRb" name="elemRb"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;">铼Re：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemRe" name="elemRe"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">𬬻Rf：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemRf" name="elemRf"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">𬬭Rg：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemRg" name="elemRg"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铑Rh：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemRh" name="elemRh"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">氡Rn：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemRn" name="elemRn"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钌Ru：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemRu" name="elemRu"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">S</span>硫S：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemS" name="elemS"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;">锑Sb：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemSb" name="elemSb"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钪Sc：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemSc" name="elemSc"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">硒Se：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemSe" name="elemSe"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钐Sm：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemSm" name="elemSm"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锡Sn：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemSn" name="elemSn"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锶Sr：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemSr" name="elemSr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">T</span>钽Ta：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemTa" name="elemTa"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;">铽Tb：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemTb" name="elemTb"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锝Tc：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemTc" name="elemTc"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">碲Te：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemTe" name="elemTe"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">钍Th：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemTh" name="elemTh"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铊Tl：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemTl" name="elemTl"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">铥Tm：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemTm" name="elemTm"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">U</span>铀U：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemU" name="elemU"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                            <tr>
                                <th style="width: 120px;"><span style="color: #dd0000">V</span>钒V：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemV" name="elemV"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">X</span>氙Xe：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemXe" name="elemXe"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;"><span style="color: #dd0000">Y</span>钇Y：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemY" name="elemY"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">镱Yb：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemYb" name="elemYb"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">锆Zr：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemZr" name="elemZr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">Nr：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemNr" name="elemNr"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                                <th style="width: 120px;">其他：</th>
                                <td class="tdr">
                                    <input class="easyui-textbox" id="elemOther" name="elemOther"
                                           data-options="required:true,value:0,validType:['floatLength[5,2]']"
                                           style="width: 60px;"/>
                                </td>
                            </tr>
                        </table>
                    </div>
                </div>
                <hr/>
                <table class="table table-bordered table-info" style="width: 100%" id="elementNum2">
                    <tr>
                        <th class="tdl">维护人：</th>
                        <td class="tdr">
                            <input class="easyui-textbox" id="modifyName" name="modifyName"
                                   data-options="editable:false,onlyview:true"/>
                        </td>
                        <th class="tdl">维护日期：</th>
                        <td class="tdr">
                            <input class="easyui-datebox" id="modifyDate" name="modifyDate"
                                   data-options="editable:false,onlyview:true"/>
                        </td>
                    </tr>
                </table>
                <hr/>
            </form>
            <table id="dg"></table>
            <table class="table table-bordered table-info" style="width: 100%;">
                <tr>
                    <td colspan="4" align="left" style="padding: 0;">
                        <input class="btn btn-primary" type="button" id="uploadBtn" onclick="uploadFile()"
                               value="上传图片"/>
                    </td>
                </tr>
                <tr>
                    <td colspan="4" align="left" style="height:80px">
                        <table id="img">
                        </table>
                    </td>
                </tr>
            </table>
        </div>
    </div>
</div>
<script>
    var param = {};
    var mcdReportId;
    var operation;
    var user;
    var checkId;
    var userLogin;
    var taskId;
    var userId;//工作流使用
    var userName;//工作流使用
    var currentDate = new Date();
    var year = currentDate.getFullYear().toString();
    var month = (currentDate.getMonth() + 1).toString();
    var day = currentDate.getDate().toString();
    $("#moreElement").hide();
    var ifShow = false;
    $("#moreEleButton").click(function () {
        if (ifShow) {
            $("#moreElement").slideUp(1000);
            $("#dg").resize(function () {
                return {width: 926, height: 140};
            });
            ifShow = false;
        } else {
            $("#moreElement").slideDown(1000);
            $("#dg").resize(function () {
                return {width: 912, height: 140};
            });
            ifShow = true;
        }
    });
    function i18nCallBack() {
        param = getParentParam_();
        user = getLoginInfo();
        operation = param.operation;
        checkId = param.checkId;
        mcdReportId = param.mcdReportId;
        taskId = param.taskId;
        userId = param.userId;
        userName = param.userName;
        if (taskId == null) {
            userLogin = getLoginInfo();
            $("#modifyName").textbox('setValue', userLogin.userName);
            $("#modifyDate").datebox('setValue', year + "-" + month + "-" + day);
            $("#modifyUser").val(userLogin.accountId);
        }

        if ("view" == operation) {
            $(".easyui-textbox").textbox({required: false, onlyview: true});
            $(".easyui-combobox").combobox({required: false, onlyview: true});
            $("#saveBtn").hide();
        }

        InitFuncCodeRequest_({
            async: false,
            data: {
                domainCode: "ENG_MCD_MATE_TYPE,ENG_MCD_MATE_CHIP_TYPE",
                FunctionCode: "ANALYSIS_DOMAIN_BYCODE"
            },
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    //材料类别
                    $('#mateType').combobox({
                        panelHeight: '60px',
                        data: jdata.data.ENG_MCD_MATE_TYPE,
                        valueField: 'VALUE',
                        textField: 'TEXT'
                    });
                    //碎屑性质
                    $('#chipType').combobox({
                        panelHeight: '60px',
                        data: jdata.data.ENG_MCD_MATE_CHIP_TYPE,
                        valueField: 'VALUE',
                        textField: 'TEXT'
                    });
                    if (checkId) {
                        InitDataForm(checkId);
                        InitDataGrid(checkId);
                    } else {
                        InitDataGrid(-1);
                    }
                } else {
                    MsgAlert({content: jdata.msg, type: 'error'});
                }
            }
        });
    }

    function InitDataGrid(checkId) {
        InitGatewayRequest_({
            type: "get",
            path: "/meng-engine/engMcdCheckCorrel/engMcdCheckCorrelByCheckId/" + checkId,
            successCallBack: function (jdata) {
                if (jdata.success == true) {
                    $("#dg").MyDataGrid({
                        identity: "dg",
                        pagination: false,
                        data: jdata.obj,
                        resize: function () {
                            return {width: 926, height: 140};
                        },
                        columns: {
                            param: {FunctionCode: 'ENG_MCD_CHECK_CORREL_LIST'},
                            alter: {
                                checkDate: {
                                    type: 'date'
                                }
                            }
                        }
                    });
                } else {
                    MsgAlert({content: "获取检测报告相似计算列表失败！", type: 'error'});
                }
            }
        });
    }

    //保存
    function save() {
        var isValidate = $("#mform").form('validate');
        if (!isValidate) {
            return;
        }
        var number = 0;
        var elementAddValue = "";
        $("#elementAllNum .easyui-textbox").each(function () {
            var val = Number($(this).val());
            var idValue = $(this).attr("id");
            idValue = idValue.substring(idValue.indexOf("m") + 1, idValue.length);
            var num = parseFloat(val);
            if (num < 0) {
                MsgAlert({content: "元素含量不能为负数！", type: 'error'});
                return;
            }
            number = num + number;
            if (num > 0) {
                elementAddValue = elementAddValue + idValue + ":" + num + ";";
            }
        });
        if (95 > parseFloat(number) || parseFloat(number) > 105) {
            MsgAlert({content: "所有元素之和必须在95-105之间！", type: 'error'});
            return;
        }
        $("#elemAll").val(elementAddValue);
        var pkid = $("#pkid").val();
        if (pkid) {
            operation = 'edit';
        } else {
            operation = 'add';
        }
        saveOrUpdateData(operation, mcdReportId);
    }

    function saveOrUpdateData(operation, mcdReportId) {
        var $form = $("#mform");
        var datas = $form.serializeObject();
        datas['operation'] = operation;
        datas['mcdId'] = mcdReportId;
        InitGatewayRequest_({
            async: false,
            path: "/meng-engine/engMcdCheck/addOrEditEngMcdCheck",
            data: datas,
            successCallBack: function (jdata) {
                if (jdata.success == true) {
                    MsgAlert({content: $.i18n.t('msg_tip:TIP.COMMON.OPT_SUCCESS')});
                    param.OWindow.reload_(mcdReportId);
                    reload_check(jdata.obj.pkid);
                    $("#pkid").val(jdata.obj.pkid);
                } else {
                    MsgAlert({content: '操作失败', type: 'error'});
                }
            }
        });
    }

    //回显
    function InitDataForm(checkId) {
        $("#pkid").val(checkId);
        InitGatewayRequest_({
            type: "get",
            async: false,
            path: "/meng-engine/engMcdCheck/engMcdCheckById/" + checkId,
            successCallBack: function (jdata) {
                if (jdata.success == true) {
                    ParseFormField_(jdata.obj, $("#mform"));
                    if ("view" != operation) {
                        if (taskId == null) {
                            $("#modifyUser").val(userLogin.accountId);
                            $("#modifyName").textbox('setValue', userLogin.userName);
                            $("#modifyDate").datebox('setValue', year + "-" + month + "-" + day);
                        } else {
                            $("#modifyUser").val(userId);
                            $("#modifyName").textbox('setValue', userName);
                            $("#modifyDate").datebox('setValue', year + "-" + month + "-" + day);
                        }
                    }
                    loadPic(checkId);
                } else {
                    MsgAlert({content: '回显失败!', type: 'error'});
                }
            }
        });
    }

    function showOrHideElements(ifShow) {
        $("#moreElement").show();
    }

    //刷新相似计算列表
    function reload_check(checkId) {
        InitDataForm(checkId);
        InitDataGrid(checkId);
    }

    function uploadFile() {
        if ("view" == operation) {
            MsgAlert({content: '查看状态下不可上传图片！', type: 'error'});
        } else {
            var checkId = $("#pkid").val();
            if (checkId) {
                common_upload_({
                    param: {
                        cat: "engMcdCheck",
                        sourceId: checkId,
                        successCallBack: function () {
                            loadPic(checkId);
                        },
                        fialCellBack: ""
                    }
                });
            } else {
                MsgAlert({content: '请先保存磁堵检查报告再上传！', type: 'error'});
            }
        }
    }

    function delImage(pkid) {
        deleteFile(pkid);
        loadPic(checkId);
    }

    //加载图片
    function loadPic(checkId) {
        InitGatewayRequest_({
            async: false,
            path: "/meng-engine/engBsiDamage/getImgs",
            data: {"sourceId": checkId, "cat": "engMcdCheck"},
            successCallBack: function (jdata) {
                if (jdata.success == true) {
                    var imgs = jdata.obj;
                    if (imgs != null) {
                        var tbody = window.document.getElementById("img");
                        tbody.innerHTML = "";
                        var tdstr = "<tr>";
                        for (var i = 0; i < imgs.length; i++) {
                            if ("view" == operation) {
                                tdstr = tdstr + '<td ><img name="damage" onclick ="viewFile(this);" style="width: 190px;height: 190px" src="' + imgs[i].url + '"  /></td>';
                            } else {
                                tdstr = tdstr + '<td ><img name="damage" onclick ="viewFile(this);" style="width: 190px;height: 190px" src="' + imgs[i].url + '"  /> <br/> ' +
                                    '<img style="margin-left: 60px" width="60" height="60" onclick="delImage(' + imgs[i].pkid + ');return false;" src="del.png"/></td>';
                            }
                            if (i != 0 && (i + 1) % 4 == 0) {
                                tdstr = tdstr + "<tr/><tr>";
                            }
                            if (i == (imgs.length - 1) && (i + 1) % 4 != 0) {
                                tdstr = tdstr + "<tr/>";
                            }
                        }
                        tbody.innerHTML = tdstr;
                    }
                } else {
                    MsgAlert({content: "加载图片失败!", type: 'error'});
                }
            }
        });
    }

    function reload_() {

    }

    function viewFile(val){
        var url = val.src;
        var e = window.event;
        var scrollX = document.documentElement.scrollLeft || document.body.scrollLeft;
        var scrollY = document.documentElement.scrollTop || document.body.scrollTop;
        var x = scrollX/2+200;
        var y = scrollY/2+100;
        var width = 600;
        var height = 570;
        var img_infor = "<img width='" + width + "' height='" + height + "' border='0' src='" + url + "' />";
        bigImgIndex = layer.open({
            content:img_infor,
            type:1,
            offset:[y+"px",x+"px"],
            title:false,
            area:['auto','auto'],
            shade:0,
            closeBtn:1
        });
    }

</script>
</body>
</html>