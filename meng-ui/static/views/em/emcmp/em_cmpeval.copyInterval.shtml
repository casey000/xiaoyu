<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html
        xmlns="http://www.w3.org/1999/html">
<head id="i18n_" module="emmpdeval">
    <!--#include virtual="/views/items/resource_.shtml"-->
    <title>复制维修间隔</title>
</head>
<body>
<div style="">
    <div class="ibox float-e-margins">
        <div class="ibox-content">
            <div class="form-horizontal m-t" id="mform">

                <tr align="right">
                    <td align="right">
                        <a href="javascript:void(0)" style="margin-right:5px;float: right" class="easyui-linkbutton"
                           data-options=""
                           onclick="closeAdd()"><span data-i18n="">关闭</span></a>
                        <a href="javascript:void(0)" style="margin-right:5px;float: right" class="easyui-linkbutton"
                           data-options=""
                           onclick="confirm_()"><span data-i18n="">确认</span></a>

                    </td>
                </tr>

                <fieldset class="fieldset_eui" style="float:left;width:100%; margin-right:5px">
                    <!--<legend data-i18n="">查询结果</legend>-->
                    <table cellspacing="0" cellpadding="2">
                    </table>
                    <table id="dg2"></table>
                </fieldset>

            </div>
        </div>
    </div>
</div>
</body>
<script type="text/javascript" src="/js/datagrid_utils.js"></script>
<script type="text/javascript">


    var param = {};
    var itemPkid;
    //var PKID;
    param = getParentParam_();
    itemPkid = param.itemPkid;
    // PKID=param.PKID;
    var PKID = param.PKID;


    function i18nCallBack() {
        InitDataGrid();
    }


    function InitDataGrid() {
        var identity = 'dg2';
        $("#dg2").MyDataGrid({
            identity: identity,
            queryParams: {INTERVAL_PKID: PKID, itemPkid: itemPkid},
            columns: {
                param: {FunctionCode: 'EM_CMP_SHOW_INTERVAL'},
            },
            resize: function () {
                return {height: 200};
            }
        });
    }

    //确认
    function confirm_() {
        // O_Id=PKID;
        var rowData = $('#dg2').datagrid('getSelected');
        //rowData.O_Id=O_Id;
        rowData.OINTERVAL_PKID = PKID;
        var rowData = JSON.stringify(toCamelCase(rowData));
        if (!rowData) {
            layer.msg($.i18n.t('msg_err:ERRMSG.COMMON.NO_SELECT_ROW_ERROR'), {icon: 5});
        }
        common_delete_({
            cfmI18next: "确定复制该适用性吗？",
            param: {data: {rowDatas: rowData}},
            FunctionCode: "EM_CMP_COPY_APPL",
            successCallBack: function (jdata) {
                //$("#pkid").val(jdata.data.pkid);
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    CloseWindowIframe();
                }
            }
        });
    }

    //关闭按钮
    function closeAdd() {
        $.messager.confirm('', '是否关闭', function (r) {
            if (r) {
                CloseWindowIframe();
                param.OWindow.reload_();
                $("#dg").form('clear');
            }
        });
    }


    /** 刷新列表数据 */

    function reload_() {
        $("#dg2").datagrid("reload");
    }


</script>
</html>


