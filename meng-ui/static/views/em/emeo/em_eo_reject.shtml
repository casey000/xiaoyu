<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head id="i18n_" module="">
    <!--#include virtual="/views/items/resource_.shtml"-->
</head>
<body class="ibody">
<fieldset class="fieldset_eui">
    <form id="mform" method="post">
        <div id="searchBar">
            <table class="table table-bordered table-info">
                <tr>
                    <th class="th" align="right" style="width: 80px;">驳回原因：</th>
                    <td class="tdr">
                        <textarea class="easyui-textbox" id="memo" name="memo" data-options="multiline:true,validType:['maxLength[500]']"
                                  style="width:350px ;height:80px" ></textarea>
                    </td>
                </tr>
                <tr>
                    <td colspan="2" align="center">
                        <input class="btn btn-primary" type="button" onclick="ok()" value="驳回" id="rejectOk"
                               style="width: 50px;margin:5px;"/>
                    </td>
                </tr>
            </table>
        </div>
    </form>
</fieldset>
<table id="dg">
</table>
<script type="text/javascript" src="/js/datagrid_utils.js"></script>
<script type="text/javascript">
    var PAGE_DATA = {};
    var param =
    param = getParentParam_();
    var eoPkid = param.eoPkid;

    function i18nCallBack() {
    }


    function ok() {
        var isValidate = $("#mform").form('validate');
        if (!isValidate)
            return;
        var memo = $('#memo').textbox('getValue');
        InitFuncCodeRequest_({
            async: false,
            data: {eoPkid: eoPkid, memo:memo, FunctionCode: 'EM_EO_REJECT'},
            successCallBack: function (jdata) {
                if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                    MsgAlert({content: $.i18n.t('msg_tip:TIP.COMMON.OPT_SUCCESS')});
                    param.OWindow.reloadParent();
                    param.OWindow.CloseWindowIframe();
                    CloseWindowIframe();
                } else {
                    MsgAlert({content: '驳回失败', type: "error"});
                }

            }
        });
    }
    
    /** 刷新列表数据 */
    function reload_() {
        $("#dg").datagrid("reload");
    }


    //重置
    function doClear_() {
        $("#ffSearch").form('clear');
    }


</script>
</body>
</html>