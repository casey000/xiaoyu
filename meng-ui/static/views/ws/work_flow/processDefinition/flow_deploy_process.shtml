<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<html>
<head id="i18n_" module="">
    <!--#include virtual="/views/items/resource_.shtml"-->
    <script src="/js/plugins/validate/jquery.validate.min.js"></script>
    <script src="/js/plugins/validate/messages_zh.min.js"></script>
    <script src="/js/plugins/validate/validate_util.js"></script>
    <title></title>
    <script type="text/javascript">
        $(function () {
            var param = getParentParam_('mparam');
            if (param) {
            }
            var options = {
                onfocusout: function (element) {
                    $(element).valid();
                },
                rules: {
                    xmlContent: "required"
                },
                messages: {
                    xmlContent: "请填写流程定义XML!"
                },
                invalidHandler: function () {
                    return false;
                },
                submitHandler: function () {
                    AjaxCall_("/api/v1/plugins/WORK_FLOW_DEFINE_DEPLOY", $('#signupForm').serialize(), function (jdata) {
                        if (jdata.code == RESULT_CODE.SUCCESS_CODE) {
                            MsgAlert({content: jdata.msg ? jdata.msg : $.i18n.t('msg_err:ERRMSG.COMMON.SUCCESS_CODE')});
                            CloseWindowIframe();
                        } else {
                            MsgAlert({content: jdata.msg, type: 'error'});
                        }
                    });
                    return false;
                }
            };
            $("#signupForm").validate(options);
        });


    </script>
</head>
<body>

<div style="">
    <div class="ibox float-e-margins">
        <div class="ibox-content">
            <form class="form-horizontal m-t" id="signupForm" method="post"
                  action="">
                <table cellspacing="0" cellpadding="2" class="table table-bordered table-info">
                    <tr>
                        <th class="tdl" colspan="2">流程定义内容(XML)</th>
                    </tr>
                    <tr>
                        <td>
                            <textarea class="form-control" style="width: 98%; height: 180px;"
                                      name="xmlContent"></textarea>
                        </td>
                    </tr>
                    <tr>
                        <td colspan="6" align="center">
                            <button class="btn btn-primary" type="submit">提交</button>
                        </td>
                    </tr>
                </table>
            </form>
        </div>
    </div>
</div>

</body>
</html>