<script type="text/javascript">
    <!--
    jq(function () {
        InitCandidateDG();
        //loadTaskCandidateGroups();
    });

    function InitCandidateDG() {
        jq('#gdg').datagrid({
            url: Constant.API_URL + "SYS_ROLE_CBX",
            rownumbers: true,
            striped: true,
            width: 250,
            height: 200,
            columns: [[
                {field: 'ROLE_NAME', title: '角色名称', width: 100},
                {field: 'ROLE_DESC', title: '角色描述', width: 100}
            ]],
            loadFilter: function (result) {
                return {total: result.data.length, rows: result.data};
            },
            onLoadSuccess: function (data) {
                if (task.performerType == "candidateGroups") {
                    jq.each(data.rows, function (k, v) {
                        if ((',' + task.expression + ',').indexOf(',' + v.PKID + ',') > -1) {
                            jq('#gdg').datagrid('selectRow', k);
                        }
                    });
                }
            }
        });
    }

    function deleteCandidateGroup(name) {
        task.deleteCandidateGroup(name);
        loadTaskCandidateGroups();
    }

    function loadTaskCandidateGroups() {
        var candidateGroups = task.candidateGroups;
        var candidate_groups_grid_rows = [];
        //alert(listeners.getSize());
        for (var i = 0; i < candidateGroups.getSize(); i++) {
            var candidateGroup = candidateGroups.get(i);
            var group = {
                name: candidateGroup,
                action: ''
            };
            candidate_groups_grid_rows[i] = group;
        }
        ;
        //alert(listener_grid_rows);
        var candidate_groups_grid_data = {
            total: candidateGroups.getSize(),
            rows: candidate_groups_grid_rows
        };
        _task_candidate_groups_list.datagrid('loadData', candidate_groups_grid_data);
    }

    //-->
</script>
<table id="gdg"></table>
